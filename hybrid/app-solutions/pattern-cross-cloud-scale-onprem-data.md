---
title: Azure Stack Hub 中的跨云缩放（本地数据）模式
description: 了解如何在 Azure 和 Azure Stack Hub 中生成使用本地数据的可跨云缩放的应用。
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: edbb608fbf8e5288f29572bfe4cca98ffb3cb8fc
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/17/2020
ms.locfileid: "84909946"
---
# <a name="cross-cloud-scaling-on-premises-data-pattern"></a><span data-ttu-id="81aa1-103">跨云缩放（本地数据）模式</span><span class="sxs-lookup"><span data-stu-id="81aa1-103">Cross-cloud scaling (on-premises data) pattern</span></span>

<span data-ttu-id="81aa1-104">了解如何生成跨 Azure 和 Azure Stack Hub 的混合应用。</span><span class="sxs-lookup"><span data-stu-id="81aa1-104">Learn how to build a hybrid app that spans Azure and Azure Stack Hub.</span></span> <span data-ttu-id="81aa1-105">此模式还演示如何使用单个本地数据源来实现合规性。</span><span class="sxs-lookup"><span data-stu-id="81aa1-105">This pattern also shows you how to use a single on-premises data source for compliance.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="81aa1-106">上下文和问题</span><span class="sxs-lookup"><span data-stu-id="81aa1-106">Context and problem</span></span>

<span data-ttu-id="81aa1-107">许多组织收集并存储大量敏感客户数据。</span><span class="sxs-lookup"><span data-stu-id="81aa1-107">Many organizations collect and store massive amounts of sensitive customer data.</span></span> <span data-ttu-id="81aa1-108">企业规章或政府政策经常阻止组织将敏感数据存储在公有云中。</span><span class="sxs-lookup"><span data-stu-id="81aa1-108">Frequently they're prevented from storing sensitive data in the public cloud because of corporate regulations or government policy.</span></span> <span data-ttu-id="81aa1-109">这些组织还希望利用公有云的可伸缩性。</span><span class="sxs-lookup"><span data-stu-id="81aa1-109">Those organizations also want to take advantage of the scalability of the public cloud.</span></span> <span data-ttu-id="81aa1-110">公有云可以处理季节性的流量高峰，使客户能够在需要时将费用花费在他们真正需要的硬件上。</span><span class="sxs-lookup"><span data-stu-id="81aa1-110">The public cloud can handle seasonal peaks in traffic, allowing customers to pay for exactly the hardware they need, when they need it.</span></span>

## <a name="solution"></a><span data-ttu-id="81aa1-111">解决方案</span><span class="sxs-lookup"><span data-stu-id="81aa1-111">Solution</span></span>

<span data-ttu-id="81aa1-112">此解决方案利用私有云的合规性优势，并将这些优势与公有云的可伸缩性相结合。</span><span class="sxs-lookup"><span data-stu-id="81aa1-112">The solution takes advantage of the compliance benefits of the private cloud, combining them with the scalability of the public cloud.</span></span> <span data-ttu-id="81aa1-113">Azure 和 Azure Stack Hub 混合云为开发人员提供一致的体验。</span><span class="sxs-lookup"><span data-stu-id="81aa1-113">The Azure and Azure Stack Hub hybrid cloud provide a consistent experience for developers.</span></span> <span data-ttu-id="81aa1-114">这种一致性使他们能够将其技能运用到公有云和本地环境中。</span><span class="sxs-lookup"><span data-stu-id="81aa1-114">This consistency lets them apply their skills to both public cloud and on-premises environments.</span></span>

<span data-ttu-id="81aa1-115">可以参考解决方案部署指南将相同的 Web 应用部署到公有云和私有云。</span><span class="sxs-lookup"><span data-stu-id="81aa1-115">The solution deployment guide allows you to deploy an identical web app to a public and private cloud.</span></span> <span data-ttu-id="81aa1-116">还可以访问私有云中托管的无法通过 Internet 路由的网络。</span><span class="sxs-lookup"><span data-stu-id="81aa1-116">You can also access a non-internet routable network hosted on the private cloud.</span></span> <span data-ttu-id="81aa1-117">Web 应用的负载将受到监视。</span><span class="sxs-lookup"><span data-stu-id="81aa1-117">The web apps are monitored for load.</span></span> <span data-ttu-id="81aa1-118">当流量大幅增加时，某个程序会处理 DNS 记录，以将流量重定向到公有云。</span><span class="sxs-lookup"><span data-stu-id="81aa1-118">Upon a significant increase in traffic, a program manipulates DNS records to redirect traffic to the public cloud.</span></span> <span data-ttu-id="81aa1-119">当流量不再高发时，将会更新 DNS 记录，以将流量定向回到私有云。</span><span class="sxs-lookup"><span data-stu-id="81aa1-119">When traffic is no longer significant, the DNS records are updated to direct traffic back to the private cloud.</span></span>

<span data-ttu-id="81aa1-120">[![使用本地数据模式进行跨云缩放](media/pattern-cross-cloud-scale-onprem-data/solution-architecture.png)](media/pattern-cross-cloud-scale-onprem-data/solution-architecture.png)</span><span class="sxs-lookup"><span data-stu-id="81aa1-120">[![Cross-cloud scaling with on-prem data pattern](media/pattern-cross-cloud-scale-onprem-data/solution-architecture.png)](media/pattern-cross-cloud-scale-onprem-data/solution-architecture.png)</span></span>

## <a name="components"></a><span data-ttu-id="81aa1-121">组件</span><span class="sxs-lookup"><span data-stu-id="81aa1-121">Components</span></span>

<span data-ttu-id="81aa1-122">此解决方案使用以下组件：</span><span class="sxs-lookup"><span data-stu-id="81aa1-122">This solution uses the following components:</span></span>

| <span data-ttu-id="81aa1-123">层</span><span class="sxs-lookup"><span data-stu-id="81aa1-123">Layer</span></span> | <span data-ttu-id="81aa1-124">组件</span><span class="sxs-lookup"><span data-stu-id="81aa1-124">Component</span></span> | <span data-ttu-id="81aa1-125">说明</span><span class="sxs-lookup"><span data-stu-id="81aa1-125">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="81aa1-126">Azure</span><span class="sxs-lookup"><span data-stu-id="81aa1-126">Azure</span></span> | <span data-ttu-id="81aa1-127">Azure 应用服务</span><span class="sxs-lookup"><span data-stu-id="81aa1-127">Azure App Service</span></span> | <span data-ttu-id="81aa1-128">[Azure 应用服务](/azure/app-service/)可让你生成和托管 Web 应用、RESTful API 应用和 Azure Functions。</span><span class="sxs-lookup"><span data-stu-id="81aa1-128">[Azure App Service](/azure/app-service/) allows you to build and host web apps, RESTful API apps, and Azure Functions.</span></span> <span data-ttu-id="81aa1-129">相关应用全都以所选的编程语言编写，无需管理基础结构。</span><span class="sxs-lookup"><span data-stu-id="81aa1-129">All in the programming language of your choice, without managing infrastructure.</span></span> |
| | <span data-ttu-id="81aa1-130">Azure 虚拟网络</span><span class="sxs-lookup"><span data-stu-id="81aa1-130">Azure Virtual Network</span></span>| <span data-ttu-id="81aa1-131">[Azure 虚拟网络 (VNet)](/azure/virtual-network/virtual-networks-overview) 是 Azure 中专用网络的基本构建块。</span><span class="sxs-lookup"><span data-stu-id="81aa1-131">[Azure Virtual Network (VNet)](/azure/virtual-network/virtual-networks-overview) is the fundamental building block for private networks in Azure.</span></span> <span data-ttu-id="81aa1-132">VNet 允许多种类型的 Azure 资源（例如虚拟机 [VM]）以安全方式彼此通信、与 Internet 通信，以及与本地网络通信。</span><span class="sxs-lookup"><span data-stu-id="81aa1-132">VNet enables multiple Azure resource types, such as virtual machines (VM), to securely communicate with each other, the internet, and on-premises networks.</span></span> <span data-ttu-id="81aa1-133">该解决方案还演示了其他网络组件的用法：</span><span class="sxs-lookup"><span data-stu-id="81aa1-133">The solution also demonstrates the use of additional networking components:</span></span><br><span data-ttu-id="81aa1-134">- 应用和网关子网。</span><span class="sxs-lookup"><span data-stu-id="81aa1-134">- app and gateway subnets.</span></span><br><span data-ttu-id="81aa1-135">- 本地网络网关。</span><span class="sxs-lookup"><span data-stu-id="81aa1-135">- a local on-premises network gateway.</span></span><br><span data-ttu-id="81aa1-136">- 充当站点到站点 VPN 网关连接的虚拟网络网关。</span><span class="sxs-lookup"><span data-stu-id="81aa1-136">- a virtual network gateway, which acts as a site-to-site VPN gateway connection.</span></span><br><span data-ttu-id="81aa1-137">- 公共 IP 地址。</span><span class="sxs-lookup"><span data-stu-id="81aa1-137">- a public IP address.</span></span><br><span data-ttu-id="81aa1-138">- 点到站点 VPN 连接。</span><span class="sxs-lookup"><span data-stu-id="81aa1-138">- a point-to-site VPN connection.</span></span><br><span data-ttu-id="81aa1-139">- 用于托管 DNS 域和提供名称解析的 Azure DNS。</span><span class="sxs-lookup"><span data-stu-id="81aa1-139">- Azure DNS for hosting DNS domains and providing name resolution.</span></span> |
| | <span data-ttu-id="81aa1-140">Azure 流量管理器</span><span class="sxs-lookup"><span data-stu-id="81aa1-140">Azure Traffic Manager</span></span> | <span data-ttu-id="81aa1-141">[Azure 流量管理器](/azure/traffic-manager/traffic-manager-overview)是基于 DNS 的流量负载均衡器。</span><span class="sxs-lookup"><span data-stu-id="81aa1-141">[Azure Traffic Manager](/azure/traffic-manager/traffic-manager-overview) is a DNS-based traffic load balancer.</span></span> <span data-ttu-id="81aa1-142">使用它可以控制用户流量在不同数据中心内的服务终结点上的分布。</span><span class="sxs-lookup"><span data-stu-id="81aa1-142">It allows you to control the distribution of user traffic for service endpoints in different datacenters.</span></span> |
| | <span data-ttu-id="81aa1-143">Azure Application Insights</span><span class="sxs-lookup"><span data-stu-id="81aa1-143">Azure Application Insights</span></span> | <span data-ttu-id="81aa1-144">[Application Insights](/azure/azure-monitor/app/app-insights-overview)是用于在多个平台上构建和管理应用程序的 web 开发人员的可扩展应用程序性能管理服务。</span><span class="sxs-lookup"><span data-stu-id="81aa1-144">[Application Insights](/azure/azure-monitor/app/app-insights-overview) is an extensible Application Performance Management service for web developers building and managing apps on multiple platforms.</span></span>|
| | <span data-ttu-id="81aa1-145">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="81aa1-145">Azure Functions</span></span> | <span data-ttu-id="81aa1-146">[Azure Functions](/azure/azure-functions/) 用于在无服务器环境中执行代码，无需先创建 VM 或发布 Web 应用。</span><span class="sxs-lookup"><span data-stu-id="81aa1-146">[Azure Functions](/azure/azure-functions/) allows you to execute your code in a serverless environment without having to first create a VM or publish a web app.</span></span> |
| | <span data-ttu-id="81aa1-147">Azure 自动缩放</span><span class="sxs-lookup"><span data-stu-id="81aa1-147">Azure Autoscale</span></span> | <span data-ttu-id="81aa1-148">[自动缩放](/azure/azure-monitor/platform/autoscale-overview)是云服务、VM 和 Web 应用的内置功能。</span><span class="sxs-lookup"><span data-stu-id="81aa1-148">[Autoscale](/azure/azure-monitor/platform/autoscale-overview) is a built-in feature of Cloud Services, VMs, and web apps.</span></span> <span data-ttu-id="81aa1-149">当需求有变化时，应用可通过此功能来发挥最佳性能。</span><span class="sxs-lookup"><span data-stu-id="81aa1-149">The feature allows apps to perform their best when demand changes.</span></span> <span data-ttu-id="81aa1-150">应用将会根据流量高峰进行调整，在指标有变化时发出通知，并可按需缩放。</span><span class="sxs-lookup"><span data-stu-id="81aa1-150">Apps will adjust for traffic spikes, notifying you when metrics change and scaling as needed.</span></span> |
| <span data-ttu-id="81aa1-151">Azure Stack Hub</span><span class="sxs-lookup"><span data-stu-id="81aa1-151">Azure Stack Hub</span></span> | <span data-ttu-id="81aa1-152">IaaS 计算</span><span class="sxs-lookup"><span data-stu-id="81aa1-152">IaaS Compute</span></span> | <span data-ttu-id="81aa1-153">Azure Stack Hub 可让你使用 Azure 支持的相同应用模型、自助门户和 API。</span><span class="sxs-lookup"><span data-stu-id="81aa1-153">Azure Stack Hub allows you to use the same app model, self-service portal, and APIs enabled by Azure.</span></span> <span data-ttu-id="81aa1-154">Azure Stack Hub IaaS 允许使用各种开源技术来实现一致的混合云部署。</span><span class="sxs-lookup"><span data-stu-id="81aa1-154">Azure Stack Hub IaaS allows a broad range of open-source technologies for consistent hybrid cloud deployments.</span></span> <span data-ttu-id="81aa1-155">例如，解决方案示例使用 Windows Server VM 来部署 SQL Server。</span><span class="sxs-lookup"><span data-stu-id="81aa1-155">The solution example uses a Windows Server VM to SQL Server, for example.</span></span>|
| | <span data-ttu-id="81aa1-156">Azure 应用服务</span><span class="sxs-lookup"><span data-stu-id="81aa1-156">Azure App Service</span></span> | <span data-ttu-id="81aa1-157">与 Azure Web 应用一样，该解决方案使用 [Azure Stack Hub 上的 Azure 应用服务](/azure-stack/operator/azure-stack-app-service-overview)来托管 Web 应用。</span><span class="sxs-lookup"><span data-stu-id="81aa1-157">Just like the Azure web app, the solution uses [Azure App Service on Azure Stack Hub](/azure-stack/operator/azure-stack-app-service-overview) to host the web app.</span></span> |
| | <span data-ttu-id="81aa1-158">网络</span><span class="sxs-lookup"><span data-stu-id="81aa1-158">Networking</span></span> | <span data-ttu-id="81aa1-159">Azure Stack Hub 虚拟网络的工作原理与 Azure 虚拟网络完全相同。</span><span class="sxs-lookup"><span data-stu-id="81aa1-159">The Azure Stack Hub Virtual Network works exactly like the Azure Virtual Network.</span></span> <span data-ttu-id="81aa1-160">它使用许多相同的网络组件，包括自定义主机名。</span><span class="sxs-lookup"><span data-stu-id="81aa1-160">It uses many of the same networking components, including custom hostnames.</span></span>
| <span data-ttu-id="81aa1-161">Azure DevOps Services</span><span class="sxs-lookup"><span data-stu-id="81aa1-161">Azure DevOps Services</span></span> | <span data-ttu-id="81aa1-162">注册</span><span class="sxs-lookup"><span data-stu-id="81aa1-162">Sign up</span></span> | <span data-ttu-id="81aa1-163">快速设置用于生成、测试和部署的持续集成。</span><span class="sxs-lookup"><span data-stu-id="81aa1-163">Quickly set up continuous integration for build, test, and deployment.</span></span> <span data-ttu-id="81aa1-164">有关详细信息，请参阅[注册和登录到 Azure DevOps](/azure/devops/user-guide/sign-up-invite-teammates?view=azure-devops)。</span><span class="sxs-lookup"><span data-stu-id="81aa1-164">For more information, see [Sign up, sign in to Azure DevOps](/azure/devops/user-guide/sign-up-invite-teammates?view=azure-devops).</span></span> |
| | <span data-ttu-id="81aa1-165">Azure Pipelines</span><span class="sxs-lookup"><span data-stu-id="81aa1-165">Azure Pipelines</span></span> | <span data-ttu-id="81aa1-166">使用 [Azure Pipelines](/azure/devops/pipelines/agents/agents?view=azure-devops) 实现持续集成/持续交付。</span><span class="sxs-lookup"><span data-stu-id="81aa1-166">Use [Azure Pipelines](/azure/devops/pipelines/agents/agents?view=azure-devops) for Continuous Integration/Continuous delivery.</span></span> <span data-ttu-id="81aa1-167">Azure Pipelines 可让你管理托管的生成和发布代理以及定义。</span><span class="sxs-lookup"><span data-stu-id="81aa1-167">Azure Pipelines allows you to manage hosted build and release agents and definitions.</span></span> |
| | <span data-ttu-id="81aa1-168">代码存储库</span><span class="sxs-lookup"><span data-stu-id="81aa1-168">Code repository</span></span> | <span data-ttu-id="81aa1-169">利用多个代码存储库来简化开发管道。</span><span class="sxs-lookup"><span data-stu-id="81aa1-169">Leverage multiple code repositories to streamline your development pipeline.</span></span> <span data-ttu-id="81aa1-170">使用 GitHub、Bitbucket、Dropbox、OneDrive 和 Azure Repos 中现有的代码存储库。</span><span class="sxs-lookup"><span data-stu-id="81aa1-170">Use existing code repositories in GitHub, Bitbucket, Dropbox, OneDrive, and Azure Repos.</span></span> |

## <a name="issues-and-considerations"></a><span data-ttu-id="81aa1-171">问题和注意事项</span><span class="sxs-lookup"><span data-stu-id="81aa1-171">Issues and considerations</span></span>

<span data-ttu-id="81aa1-172">在决定如何实现此解决方案时，请考虑以下几点：</span><span class="sxs-lookup"><span data-stu-id="81aa1-172">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="81aa1-173">可伸缩性</span><span class="sxs-lookup"><span data-stu-id="81aa1-173">Scalability</span></span>

<span data-ttu-id="81aa1-174">Azure 和 Azure Stack Hub 非常适合支持当今全球分布式业务的需求。</span><span class="sxs-lookup"><span data-stu-id="81aa1-174">Azure and Azure Stack Hub are uniquely suited to support the needs of today's globally distributed business.</span></span>

#### <a name="hybrid-cloud-without-the-hassle"></a><span data-ttu-id="81aa1-175">无障碍的混合云</span><span class="sxs-lookup"><span data-stu-id="81aa1-175">Hybrid cloud without the hassle</span></span>

<span data-ttu-id="81aa1-176">Microsoft 在统一的解决方案中为本地资产与 Azure Stack Hub 和 Azure 提供无可比拟的集成。</span><span class="sxs-lookup"><span data-stu-id="81aa1-176">Microsoft offers an unrivaled integration of on-premises assets with Azure Stack Hub and Azure in one unified solution.</span></span> <span data-ttu-id="81aa1-177">这种集成消除了管理多点解决方案和混合云提供程序的不便。</span><span class="sxs-lookup"><span data-stu-id="81aa1-177">This integration eliminates the hassle of managing multiple point solutions and a mix of cloud providers.</span></span> <span data-ttu-id="81aa1-178">通过跨云缩放，按几下鼠标就能利用 Azure 的强大功能。</span><span class="sxs-lookup"><span data-stu-id="81aa1-178">With cross-cloud scaling, the power of Azure is just a few clicks away.</span></span> <span data-ttu-id="81aa1-179">出现云流量突发时，只需将 Azure Stack Hub 连接到 Azure，数据和应用即可按需在 Azure 中提供。</span><span class="sxs-lookup"><span data-stu-id="81aa1-179">Just connect your Azure Stack Hub to Azure with cloud bursting and your data and apps will be available in Azure when needed.</span></span>

- <span data-ttu-id="81aa1-180">消除了构建和维护辅助灾难恢复站点的需求。</span><span class="sxs-lookup"><span data-stu-id="81aa1-180">Eliminate the need to build and maintain a secondary DR site.</span></span>
- <span data-ttu-id="81aa1-181">不再需要使用磁带备份，并且可在 Azure 中将备份数据存储长达 99 年，因而可以节省时间与成本。</span><span class="sxs-lookup"><span data-stu-id="81aa1-181">Save time and money by eliminating tape backup and house up to 99 years of backup data in Azure.</span></span>
- <span data-ttu-id="81aa1-182">将运行中的 Hyper-V、物理（预览版）和 VMware（预览版）工作负荷轻松迁移到 Azure，以利用云的经济效益和弹性。</span><span class="sxs-lookup"><span data-stu-id="81aa1-182">Easily migrate running Hyper-V, Physical (in preview), and VMware (in preview) workloads into Azure to leverage the economics and elasticity of the cloud.</span></span>
- <span data-ttu-id="81aa1-183">针对 Azure 中本地资产的副本运行计算密集型报告或分析，且不影响生产工作负荷。</span><span class="sxs-lookup"><span data-stu-id="81aa1-183">Run compute intensive reports or analytics on a replicated copy of your on-premises asset in Azure without impacting production workloads.</span></span>
- <span data-ttu-id="81aa1-184">根据需要使用更大的计算模板将流量突发到云中，并在 Azure 中运行本地工作负荷。</span><span class="sxs-lookup"><span data-stu-id="81aa1-184">Burst into the cloud and run on-premises workloads in Azure, with larger compute templates when needed.</span></span> <span data-ttu-id="81aa1-185">混合解决方案可在需要时提供所需的强大功能。</span><span class="sxs-lookup"><span data-stu-id="81aa1-185">Hybrid gives you the power you need, when you need it.</span></span>
- <span data-ttu-id="81aa1-186">只需按几下鼠标，即可在 Azure 中创建多层开发环境，甚至可将实时生产数据复制到开发/测试环境，使数据保持准实时的同步。</span><span class="sxs-lookup"><span data-stu-id="81aa1-186">Create multi-tier development environments in Azure with a few clicks–even replicate live production data to your dev/test environment to keep it in near real-time sync.</span></span>

#### <a name="economy-of-cross-cloud-scaling-with-azure-stack-hub"></a><span data-ttu-id="81aa1-187">通过 Azure Stack Hub 进行跨云缩放的经济效益</span><span class="sxs-lookup"><span data-stu-id="81aa1-187">Economy of cross-cloud scaling with Azure Stack Hub</span></span>

<span data-ttu-id="81aa1-188">云突发的主要优势是经济实惠。</span><span class="sxs-lookup"><span data-stu-id="81aa1-188">The key advantage to cloud bursting is economical savings.</span></span> <span data-ttu-id="81aa1-189">只有在需要这些额外的资源时，才需要支付费用。</span><span class="sxs-lookup"><span data-stu-id="81aa1-189">You only pay for the additional resources when there's a demand for those resources.</span></span> <span data-ttu-id="81aa1-190">无需付费购买不必要的额外容量，也不必尝试预测需求高峰和波动。</span><span class="sxs-lookup"><span data-stu-id="81aa1-190">No more spending on unnecessary extra capacity or trying to predict demand peaks and fluctuations.</span></span>

#### <a name="reduce-high-demand-loads-into-the-cloud"></a><span data-ttu-id="81aa1-191">减少云中的高需求负载</span><span class="sxs-lookup"><span data-stu-id="81aa1-191">Reduce high demand loads into the cloud</span></span>

<span data-ttu-id="81aa1-192">跨云缩放可用于分担处理负载。</span><span class="sxs-lookup"><span data-stu-id="81aa1-192">Cross-cloud scaling can be used to shoulder processing burdens.</span></span> <span data-ttu-id="81aa1-193">通过将基本应用移到公有云来分散负载，为业务关键型应用释放本地资源。</span><span class="sxs-lookup"><span data-stu-id="81aa1-193">Load is distributed by moving basic apps to the public cloud, freeing up local resources for business-critical apps.</span></span> <span data-ttu-id="81aa1-194">应用可应用到私有云，然后仅在有必要满足需求时才突发到公有云。</span><span class="sxs-lookup"><span data-stu-id="81aa1-194">An app can be applied to the private cloud, then burst to the public cloud only when necessary to meet demands.</span></span>

### <a name="availability"></a><span data-ttu-id="81aa1-195">可用性</span><span class="sxs-lookup"><span data-stu-id="81aa1-195">Availability</span></span>

<span data-ttu-id="81aa1-196">全局部署本身面临着挑战，例如不稳定的连接和不同区域的政府法规。</span><span class="sxs-lookup"><span data-stu-id="81aa1-196">Global deployment has its own challenges, like variable connectivity and differing government regulations by region.</span></span> <span data-ttu-id="81aa1-197">开发人员只能开发一个应用，然后根据不同的原因和要求部署该应用。</span><span class="sxs-lookup"><span data-stu-id="81aa1-197">Developers can develop just one app and then deploy it across different reasons with different requirements.</span></span> <span data-ttu-id="81aa1-198">将应用部署到 Azure 公有云，然后在本地部署其他实例或组件。</span><span class="sxs-lookup"><span data-stu-id="81aa1-198">Deploy your app to the Azure public cloud, then deploy additional instances or components locally.</span></span> <span data-ttu-id="81aa1-199">可以使用 Azure 管理所有实例之间的流量。</span><span class="sxs-lookup"><span data-stu-id="81aa1-199">You can manage traffic between all instances using Azure.</span></span>

### <a name="manageability"></a><span data-ttu-id="81aa1-200">可管理性</span><span class="sxs-lookup"><span data-stu-id="81aa1-200">Manageability</span></span>

#### <a name="a-single-consistent-development-approach"></a><span data-ttu-id="81aa1-201">单一一致的开发方法</span><span class="sxs-lookup"><span data-stu-id="81aa1-201">A single, consistent development approach</span></span>

<span data-ttu-id="81aa1-202">Azure 和 Azure Stack Hub 让你可在整个组织中使用一套一致的开发工具。</span><span class="sxs-lookup"><span data-stu-id="81aa1-202">Azure and Azure Stack Hub let you use a consistent set of development tools across the organization.</span></span> <span data-ttu-id="81aa1-203">这种一致性可让你更轻松地实现持续集成和持续开发 (CI/CD)。</span><span class="sxs-lookup"><span data-stu-id="81aa1-203">This consistency makes it easier to implement a practice of continuous integration and continuous development (CI/CD).</span></span> <span data-ttu-id="81aa1-204">部署在 Azure 或 Azure Stack Hub 中的许多应用和服务可以互换，并可在任一位置无缝运行。</span><span class="sxs-lookup"><span data-stu-id="81aa1-204">Many apps and services deployed in Azure or Azure Stack Hub are interchangeable and can run in either location seamlessly.</span></span>

<span data-ttu-id="81aa1-205">混合 CI/CD 管道有助于：</span><span class="sxs-lookup"><span data-stu-id="81aa1-205">A hybrid CI/CD pipeline can help you:</span></span>

- <span data-ttu-id="81aa1-206">根据代码存储库中提交的代码启动新的生成。</span><span class="sxs-lookup"><span data-stu-id="81aa1-206">Initiate a new build based on code commits to your code repository.</span></span>
- <span data-ttu-id="81aa1-207">自动将新生成的代码部署到 Azure 进行用户验收测试。</span><span class="sxs-lookup"><span data-stu-id="81aa1-207">Automatically deploy your newly built code to Azure for user acceptance testing.</span></span>
- <span data-ttu-id="81aa1-208">代码通过测试后，可自动部署到 Azure Stack Hub。</span><span class="sxs-lookup"><span data-stu-id="81aa1-208">Once your code has passed testing, automatically deploy to Azure Stack Hub.</span></span>

### <a name="a-single-consistent-identity-management-solution"></a><span data-ttu-id="81aa1-209">单一一致的标识管理解决方案</span><span class="sxs-lookup"><span data-stu-id="81aa1-209">A single, consistent identity management solution</span></span>

<span data-ttu-id="81aa1-210">Azure Stack Hub 可与 Azure Active Directory (Azure AD) 和 Active Directory 联合身份验证服务 (ADFS) 配合使用。</span><span class="sxs-lookup"><span data-stu-id="81aa1-210">Azure Stack Hub works with both Azure Active Directory (Azure AD) and Active Directory Federation Services (ADFS).</span></span> <span data-ttu-id="81aa1-211">在联网场景中，Azure Stack Hub 可与 Azure AD 配合使用。</span><span class="sxs-lookup"><span data-stu-id="81aa1-211">Azure Stack Hub works with Azure AD in connected scenarios.</span></span> <span data-ttu-id="81aa1-212">对于未建立连接的环境，可以使用 ADFS 作为离线解决方案。</span><span class="sxs-lookup"><span data-stu-id="81aa1-212">For environments that don't have connectivity, you can use ADFS as a disconnected solution.</span></span> <span data-ttu-id="81aa1-213">服务主体用于向应用授予访问权限，使其能够通过 Azure 资源管理器部署或配置资源。</span><span class="sxs-lookup"><span data-stu-id="81aa1-213">Service principals are used to grant access to apps, allowing them to deploy or configure resources through Azure Resource Manager.</span></span>

### <a name="security"></a><span data-ttu-id="81aa1-214">安全性</span><span class="sxs-lookup"><span data-stu-id="81aa1-214">Security</span></span>

#### <a name="ensure-compliance-and-data-sovereignty"></a><span data-ttu-id="81aa1-215">确保合规性和数据主权</span><span class="sxs-lookup"><span data-stu-id="81aa1-215">Ensure compliance, and data sovereignty</span></span>

<span data-ttu-id="81aa1-216">Azure Stack Hub 让你可在多个国家/地区运行相同的服务，就像使用公有云时一样。</span><span class="sxs-lookup"><span data-stu-id="81aa1-216">Azure Stack Hub lets you run the same service across multiple countries as you would if using a public cloud.</span></span> <span data-ttu-id="81aa1-217">在各个国家/地区的数据中心部署相同的应用可以满足数据主权要求。</span><span class="sxs-lookup"><span data-stu-id="81aa1-217">Deploying the same app in datacenters in each country allows data sovereignty requirements to be met.</span></span> <span data-ttu-id="81aa1-218">此功能可确保个人数据保留在每个国家/地区境内。</span><span class="sxs-lookup"><span data-stu-id="81aa1-218">This capability ensures personal data is kept within each country's borders.</span></span>

#### <a name="azure-stack-hub---security-posture"></a><span data-ttu-id="81aa1-219">Azure Stack Hub - 安全态势</span><span class="sxs-lookup"><span data-stu-id="81aa1-219">Azure Stack Hub - security posture</span></span>

<span data-ttu-id="81aa1-220">没有稳定、持续的服务流程，就没有良好的安全态势。</span><span class="sxs-lookup"><span data-stu-id="81aa1-220">There's no security posture without a solid, continuous servicing process.</span></span> <span data-ttu-id="81aa1-221">出于此原因，Microsoft 投资购买了一个业务流程引擎，它可以在整个基础结构中无缝应用修补程序和更新。</span><span class="sxs-lookup"><span data-stu-id="81aa1-221">For this reason, Microsoft invested in an orchestration engine that applies patches and updates seamlessly across the entire infrastructure.</span></span>

<span data-ttu-id="81aa1-222">由于与 Azure Stack Hub OEM 合作伙伴建立了合作关系，Microsoft 可将相同的安全态势延伸到 OEM 特定的组件，例如硬件生命周期主机及其上运行的软件。</span><span class="sxs-lookup"><span data-stu-id="81aa1-222">Thanks to partnerships with Azure Stack Hub OEM partners, Microsoft extends the same security posture to OEM-specific components, like the Hardware Lifecycle Host and the software running on top of it.</span></span> <span data-ttu-id="81aa1-223">这种合作关系可确保 Azure Stack Hub 在整个基础结构上具有一致且稳固的安全态势。</span><span class="sxs-lookup"><span data-stu-id="81aa1-223">This partnership ensures Azure Stack Hub has a uniform, solid security posture across the entire infrastructure.</span></span> <span data-ttu-id="81aa1-224">而客户又可以生成并保护其应用工作负荷。</span><span class="sxs-lookup"><span data-stu-id="81aa1-224">In turn, customers can build and secure their app workloads.</span></span>

#### <a name="use-of-service-principals-via-powershell-cli-and-azure-portal"></a><span data-ttu-id="81aa1-225">通过 PowerShell、CLI 和 Azure 门户使用服务主体</span><span class="sxs-lookup"><span data-stu-id="81aa1-225">Use of service principals via PowerShell, CLI, and Azure portal</span></span>

<span data-ttu-id="81aa1-226">若要为资源提供对脚本或应用的访问权限，请设置应用的标识，并使用应用自身的凭据进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="81aa1-226">To give resource access to a script or app, set up an identity for your app and authenticate the app with its own credentials.</span></span> <span data-ttu-id="81aa1-227">此标识称作服务主体，可让你：</span><span class="sxs-lookup"><span data-stu-id="81aa1-227">This identity is known as a service principal and lets you:</span></span>

- <span data-ttu-id="81aa1-228">为应用标识分配不同于你自己的权限的权限，并将这些权限限制为用于满足应用的确切需求。</span><span class="sxs-lookup"><span data-stu-id="81aa1-228">Assign permissions to the app identity that are different than your own permissions and are restricted to precisely the app's needs.</span></span>
- <span data-ttu-id="81aa1-229">执行无人参与的脚本时，使用证书进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="81aa1-229">Use a certificate for authentication when executing an unattended script.</span></span>

<span data-ttu-id="81aa1-230">有关创建服务主体以及将证书用作凭据的详细信息，请参阅[使用应用标识访问资源](/azure-stack/operator/azure-stack-create-service-principals)。</span><span class="sxs-lookup"><span data-stu-id="81aa1-230">For more information about service principal creation and using a certificate for credentials, see [Use an app identity to access resources](/azure-stack/operator/azure-stack-create-service-principals).</span></span>

## <a name="when-to-use-this-pattern"></a><span data-ttu-id="81aa1-231">何时使用此模式</span><span class="sxs-lookup"><span data-stu-id="81aa1-231">When to use this pattern</span></span>

- <span data-ttu-id="81aa1-232">我的组织正在使用 DevOps 方法，或打算在不久的将来使用某种方法。</span><span class="sxs-lookup"><span data-stu-id="81aa1-232">My organization is using a DevOps approach, or has one planned for the near future.</span></span>
- <span data-ttu-id="81aa1-233">我想要跨 Azure Stack Hub 实施方案和公有云实施 CI/CD 做法。</span><span class="sxs-lookup"><span data-stu-id="81aa1-233">I want to implement CI/CD practices across my Azure Stack Hub implementation and the public cloud.</span></span>
- <span data-ttu-id="81aa1-234">我想要跨云和本地环境合并 CI/CD 管道。</span><span class="sxs-lookup"><span data-stu-id="81aa1-234">I want to consolidate the CI/CD pipeline across cloud and on-premises environments.</span></span>
- <span data-ttu-id="81aa1-235">我想要能够使用云或本地服务无缝开发应用。</span><span class="sxs-lookup"><span data-stu-id="81aa1-235">I want the ability to develop apps seamlessly using cloud or on-premises services.</span></span>
- <span data-ttu-id="81aa1-236">我想要跨云和本地应用利用一致的开发人员技能。</span><span class="sxs-lookup"><span data-stu-id="81aa1-236">I want to leverage consistent developer skills across cloud and on-premises apps.</span></span>
- <span data-ttu-id="81aa1-237">我正在使用 Azure，但有开发人员在本地 Azure Stack Hub 云中工作。</span><span class="sxs-lookup"><span data-stu-id="81aa1-237">I'm using Azure but I have developers who are working in an on-premises Azure Stack Hub cloud.</span></span>
- <span data-ttu-id="81aa1-238">我的本地应用在季节性、周期性或无法预测的波动期间遇到需求高峰。</span><span class="sxs-lookup"><span data-stu-id="81aa1-238">My on-premises apps experience spikes in demand during seasonal, cyclical, or unpredictable fluctuations.</span></span>
- <span data-ttu-id="81aa1-239">我拥有本地组件，并想要使用云对其进行无缝缩放。</span><span class="sxs-lookup"><span data-stu-id="81aa1-239">I have on-premises components and I want to use the cloud to scale them seamlessly.</span></span>
- <span data-ttu-id="81aa1-240">我想要实现云中可伸缩性，但又希望应用尽可能地在本地运行。</span><span class="sxs-lookup"><span data-stu-id="81aa1-240">I want cloud scalability but I want my app to run on-premises as much as possible.</span></span>

## <a name="next-steps"></a><span data-ttu-id="81aa1-241">后续步骤</span><span class="sxs-lookup"><span data-stu-id="81aa1-241">Next steps</span></span>

<span data-ttu-id="81aa1-242">若要详细了解本文中介绍的主题：</span><span class="sxs-lookup"><span data-stu-id="81aa1-242">To learn more about topics introduced in this article:</span></span>

- <span data-ttu-id="81aa1-243">有关如何使用此模式的概述，请观看在[数据中心和公有云之间动态缩放应用](https://www.youtube.com/watch?v=2lw8zOpJTn0)。</span><span class="sxs-lookup"><span data-stu-id="81aa1-243">Watch [Dynamically scale apps between datacenters and public cloud](https://www.youtube.com/watch?v=2lw8zOpJTn0) for an overview of how this pattern is used.</span></span>
- <span data-ttu-id="81aa1-244">请参阅[混合应用设计注意事项](overview-app-design-considerations.md)，了解有关最佳做法的详细信息，并获取对你可能遇到的其他问题的解答。</span><span class="sxs-lookup"><span data-stu-id="81aa1-244">See [Hybrid app design considerations](overview-app-design-considerations.md) to learn more about best practices and to answer additional questions you might have.</span></span>
- <span data-ttu-id="81aa1-245">此模式使用 Azure Stack 产品系列，包括 Azure Stack Hub。</span><span class="sxs-lookup"><span data-stu-id="81aa1-245">This pattern uses the Azure Stack family of products, including Azure Stack Hub.</span></span> <span data-ttu-id="81aa1-246">请参阅 [Azure Stack 产品和解决方案系列](/azure-stack)，了解有关整个产品和解决方案组合的详细信息。</span><span class="sxs-lookup"><span data-stu-id="81aa1-246">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="81aa1-247">准备好测试解决方案示例时，请继续阅读[跨云缩放（本地数据）解决方案部署指南](solution-deployment-guide-cross-cloud-scaling-onprem-data.md)。</span><span class="sxs-lookup"><span data-stu-id="81aa1-247">When you're ready to test the solution example, continue with the [cross-cloud scaling (on-premises data) solution deployment guide](solution-deployment-guide-cross-cloud-scaling-onprem-data.md).</span></span> <span data-ttu-id="81aa1-248">该部署指南逐步说明了如何部署和测试 Azure Stack 的组件。</span><span class="sxs-lookup"><span data-stu-id="81aa1-248">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
