---
title: Azure 和 Azure Stack Hub 中的混合应用设计注意事项
description: 了解为智能云和智能边缘生成混合应用时的设计注意事项，包括放置、可伸缩性、可用性和复原能力。
author: BryanLa
ms.topic: article
ms.date: 06/07/2020
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: 4fd52f76baad8059e130adfc01cdd0152b40a510
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/17/2020
ms.locfileid: "84909944"
---
# <a name="hybrid-app-design-considerations"></a><span data-ttu-id="95739-103">混合应用设计注意事项</span><span class="sxs-lookup"><span data-stu-id="95739-103">Hybrid app design considerations</span></span>

<span data-ttu-id="95739-104">Microsoft Azure 是唯一一致的混合云。</span><span class="sxs-lookup"><span data-stu-id="95739-104">Microsoft Azure is the only consistent hybrid cloud.</span></span> <span data-ttu-id="95739-105">它让你能够重复利用开发投资，并支持跨全球 Azure、Azure 主权云和 Azure Stack（数据中心内的一个 Azure 扩展）的应用。</span><span class="sxs-lookup"><span data-stu-id="95739-105">It allows you to reuse your development investments and enables apps that can span global Azure, the sovereign Azure clouds, and Azure Stack, which is an extension of Azure in your datacenter.</span></span> <span data-ttu-id="95739-106">跨云的应用也称为“混合应用”。</span><span class="sxs-lookup"><span data-stu-id="95739-106">Apps that span clouds are also referred to as *hybrid apps*.</span></span>

<span data-ttu-id="95739-107">[Azure 应用程序体系结构指南](https://docs.microsoft.com/azure/architecture/guide)中介绍了设计可缩放、可复原且高度可用的应用的结构化方法。</span><span class="sxs-lookup"><span data-stu-id="95739-107">The [*Azure Application Architecture Guide*](https://docs.microsoft.com/azure/architecture/guide) describes a structured approach for designing apps that are scalable, resilient, and highly available.</span></span> <span data-ttu-id="95739-108">[Azure 应用程序体系结构指南](https://docs.microsoft.com/azure/architecture/guide)中所述的注意事项同样适用于针对单个云设计的应用和跨云的应用。</span><span class="sxs-lookup"><span data-stu-id="95739-108">The considerations described in the [*Azure Application Architecture Guide*](https://docs.microsoft.com/azure/architecture/guide) equally apply to apps that are designed for a single cloud and for apps that span clouds.</span></span>

<span data-ttu-id="95739-109">本文对 [Azure 应用程序](https://docs.microsoft.com/azure/architecture/guide/)[体系结构指南](https://docs.microsoft.com/azure/architecture/guide/)中所述的[软件质量的要素](https://docs.microsoft.com/azure/architecture/guide/pillars)进行补充，重点说明如何设计混合应用  。</span><span class="sxs-lookup"><span data-stu-id="95739-109">This article augments the [*Pillars of software quality*](https://docs.microsoft.com/azure/architecture/guide/pillars) discussed in the [*Azure Application*](https://docs.microsoft.com/azure/architecture/guide/) [*Architecture Guide*,](https://docs.microsoft.com/azure/architecture/guide/) focusing specifically on designing hybrid apps.</span></span> <span data-ttu-id="95739-110">此外，我们还添加了一个放置要素，因为混合应用并非专属于一个云或一个本地数据中心。</span><span class="sxs-lookup"><span data-stu-id="95739-110">In addition, we add a *placement* pillar as hybrid apps aren't exclusive to one cloud or one on-premises datacenter.</span></span>

<span data-ttu-id="95739-111">混合方案因可用于开发的资源而有很大的不同，并且涉及地理、安全性、Internet 访问等注意事项。</span><span class="sxs-lookup"><span data-stu-id="95739-111">Hybrid scenarios vary greatly with the resources that are available for development, and span considerations such as geography, security, internet access, and other considerations.</span></span> <span data-ttu-id="95739-112">尽管本指南无法列举具体的注意事项，但可以提供一些重要的指南和最佳做法供你遵循。</span><span class="sxs-lookup"><span data-stu-id="95739-112">Although this guide can't enumerate your specific considerations, it can provide some key guidelines and best practices for you to follow.</span></span> <span data-ttu-id="95739-113">成功设计、配置、部署和维护混合应用体系结构涉及许多可能不为你所熟知的设计注意事项。</span><span class="sxs-lookup"><span data-stu-id="95739-113">Successfully designing, configuring, deploying, and maintaining a hybrid app architecture involves many design considerations that might not be inherently known to you.</span></span>

<span data-ttu-id="95739-114">本文档旨在汇总实现混合应用时可能发生的问题，并提供相关注意事项（这些要素）以及处理这些问题的最佳做法。</span><span class="sxs-lookup"><span data-stu-id="95739-114">This document aims to aggregate the possible questions that might arise when implementing hybrid apps and provides considerations (these pillars) and best practices to work with them.</span></span> <span data-ttu-id="95739-115">在设计阶段解决这些问题有助于避免它们在生产环境中造成问题。</span><span class="sxs-lookup"><span data-stu-id="95739-115">By addressing these questions during the design phase, you'll avoid the issues they could cause in production.</span></span>

<span data-ttu-id="95739-116">实质上，在创建混合应用之前需要考虑到这些问题。</span><span class="sxs-lookup"><span data-stu-id="95739-116">Essentially, these are questions you need to think about before creating a hybrid app.</span></span> <span data-ttu-id="95739-117">若要开始，需做好以下工作：</span><span class="sxs-lookup"><span data-stu-id="95739-117">To get started, you need to do the following things:</span></span>

- <span data-ttu-id="95739-118">确定和评估应用组件。</span><span class="sxs-lookup"><span data-stu-id="95739-118">Identify and evaluate the app components.</span></span>
- <span data-ttu-id="95739-119">根据要素评估应用组件。</span><span class="sxs-lookup"><span data-stu-id="95739-119">Evaluate app components against the pillars.</span></span>

## <a name="evaluate-the-app-components"></a><span data-ttu-id="95739-120">评估应用组件</span><span class="sxs-lookup"><span data-stu-id="95739-120">Evaluate the app components</span></span>

<span data-ttu-id="95739-121">在较大的应用中，应用的每个组件具有其自己的特定角色，并应根据所有设计注意事项对其进行评审。</span><span class="sxs-lookup"><span data-stu-id="95739-121">Each component of an app has its own specific role within the larger app and should be reviewed with all design considerations.</span></span> <span data-ttu-id="95739-122">每个组件的要求和功能应符合这些注意事项，以帮助确定应用体系结构。</span><span class="sxs-lookup"><span data-stu-id="95739-122">Each component's requirements and features should map to these considerations to help determine the app architecture.</span></span>

<span data-ttu-id="95739-123">可通过研究应用的体系结构并确定其构成部分，将应用分解成不同的组件。</span><span class="sxs-lookup"><span data-stu-id="95739-123">Decompose your app into its components by studying your app's architecture and determining what it consists of.</span></span> <span data-ttu-id="95739-124">组件还可能包含与应用交互的其他应用。</span><span class="sxs-lookup"><span data-stu-id="95739-124">Components can also include other apps that your app interacts with.</span></span> <span data-ttu-id="95739-125">在确定组件时，请通过提出以下问题来根据其特征评估所需的混合操作：</span><span class="sxs-lookup"><span data-stu-id="95739-125">As you identify the components, evaluate your intended hybrid operations according to their characteristics by asking these questions:</span></span>

- <span data-ttu-id="95739-126">组件的用途是什么？</span><span class="sxs-lookup"><span data-stu-id="95739-126">What is the purpose of the component?</span></span>
- <span data-ttu-id="95739-127">组件之间的相互依赖关系是什么？</span><span class="sxs-lookup"><span data-stu-id="95739-127">What are the interdependencies between the components?</span></span>

<span data-ttu-id="95739-128">例如，应用可能包含定义为两个组件的前端和后端。</span><span class="sxs-lookup"><span data-stu-id="95739-128">For example, an app can have a front end and back end defined as two components.</span></span> <span data-ttu-id="95739-129">在混合方案中，前端位于一个云中，后端位于另一个云中。</span><span class="sxs-lookup"><span data-stu-id="95739-129">In a hybrid scenario, the front end is in one cloud and the back end is in the other.</span></span> <span data-ttu-id="95739-130">应用在前端与用户之间以及前端与后端之间提供信道。</span><span class="sxs-lookup"><span data-stu-id="95739-130">The app provides communication channels between the front end and the user, and also between the front end and the back end.</span></span>

<span data-ttu-id="95739-131">应用组件按照多种形式和方案定义。</span><span class="sxs-lookup"><span data-stu-id="95739-131">An app component is defined by many forms and scenarios.</span></span> <span data-ttu-id="95739-132">最重要的任务是识别组件及其云位置或本地位置。</span><span class="sxs-lookup"><span data-stu-id="95739-132">The most important task is identifying them and their cloud or on-premises location.</span></span>

<span data-ttu-id="95739-133">表 1 列出了要包含在清单中的常见应用组件。</span><span class="sxs-lookup"><span data-stu-id="95739-133">The common app components to include in your inventory are listed in Table 1.</span></span>

### <a name="table-1-common-app-components"></a><span data-ttu-id="95739-134">表 1.</span><span class="sxs-lookup"><span data-stu-id="95739-134">Table 1.</span></span> <span data-ttu-id="95739-135">常见的应用组件</span><span class="sxs-lookup"><span data-stu-id="95739-135">Common app components</span></span>

| <span data-ttu-id="95739-136">**组件**</span><span class="sxs-lookup"><span data-stu-id="95739-136">**Component**</span></span> | <span data-ttu-id="95739-137">**混合应用指南**</span><span class="sxs-lookup"><span data-stu-id="95739-137">**Hybrid app guidance**</span></span> |
| ---- | ---- |
| <span data-ttu-id="95739-138">客户端连接</span><span class="sxs-lookup"><span data-stu-id="95739-138">Client connections</span></span> | <span data-ttu-id="95739-139">应用（在任何设备上）可以从单个入口点通过多种方式访问用户，其中包括：</span><span class="sxs-lookup"><span data-stu-id="95739-139">Your app (on any device) can access users in various ways, from a single-entry point, including the following ways:</span></span><br><span data-ttu-id="95739-140">- 要求用户安装客户端以便与应用配合使用的客户端-服务器模型。</span><span class="sxs-lookup"><span data-stu-id="95739-140">-   A client-server model that requires the user to have a client installed to work with the app.</span></span> <span data-ttu-id="95739-141">从浏览器访问的基于服务器的应用。</span><span class="sxs-lookup"><span data-stu-id="95739-141">A server-based app that's accessed from a browser.</span></span><br><span data-ttu-id="95739-142">- 客户端连接可以包括连接中断时发出的通知，或发生漫游费时发出的警报。</span><span class="sxs-lookup"><span data-stu-id="95739-142">-   Client connections can include notifications when the connection is broken or alerts when roaming charges may apply.</span></span> |
| <span data-ttu-id="95739-143">身份验证</span><span class="sxs-lookup"><span data-stu-id="95739-143">Authentication</span></span>  | <span data-ttu-id="95739-144">当用户连接到应用或者从一个组件连接到另一个组件时，可能需要进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="95739-144">Authentication can be required for a user connecting to the app, or from one component connecting to another.</span></span> |
| <span data-ttu-id="95739-145">API</span><span class="sxs-lookup"><span data-stu-id="95739-145">APIs</span></span>  | <span data-ttu-id="95739-146">可让开发人员以编程方式使用 API 集和类库来访问你的应用，并根据 Internet 标准提供连接接口。</span><span class="sxs-lookup"><span data-stu-id="95739-146">You can provide developers with programmatic access to your app with API sets and class libraries and provide a connection interface based on internet standards.</span></span> <span data-ttu-id="95739-147">还可以使用 API 将应用分解成独立运行的逻辑单元。</span><span class="sxs-lookup"><span data-stu-id="95739-147">You can also use APIs to decompose an app into independently operating logical units.</span></span> |
| <span data-ttu-id="95739-148">服务</span><span class="sxs-lookup"><span data-stu-id="95739-148">Services</span></span>  | <span data-ttu-id="95739-149">可以使用简单的服务来提供应用的功能。</span><span class="sxs-lookup"><span data-stu-id="95739-149">You can employ succinct services to provide the features for an app.</span></span> <span data-ttu-id="95739-150">此类服务可以是应用运行所在的引擎。</span><span class="sxs-lookup"><span data-stu-id="95739-150">A service can be the engine that the app runs on.</span></span> |
| <span data-ttu-id="95739-151">队列</span><span class="sxs-lookup"><span data-stu-id="95739-151">Queues</span></span> | <span data-ttu-id="95739-152">可以使用队列来组织生命周期的状态以及应用组件的状态。</span><span class="sxs-lookup"><span data-stu-id="95739-152">You can use queues to organize the status of the life cycles and states of your app's components.</span></span> <span data-ttu-id="95739-153">这些队列可为订阅方提供消息传送、通知和缓冲功能。</span><span class="sxs-lookup"><span data-stu-id="95739-153">These queues can provide messaging, notifications, and buffering capabilities to subscribing parties.</span></span> |
| <span data-ttu-id="95739-154">数据存储</span><span class="sxs-lookup"><span data-stu-id="95739-154">Data storage</span></span> | <span data-ttu-id="95739-155">应用可以是无状态的，也可以是有状态的。</span><span class="sxs-lookup"><span data-stu-id="95739-155">An app can be stateless or stateful.</span></span> <span data-ttu-id="95739-156">有状态应用需要具有众多格式和容量大小的数据存储。</span><span class="sxs-lookup"><span data-stu-id="95739-156">Stateful apps need data storage that can be met by numerous formats and volumes.</span></span> |
| <span data-ttu-id="95739-157">数据缓存</span><span class="sxs-lookup"><span data-stu-id="95739-157">Data caching</span></span>  | <span data-ttu-id="95739-158">设计中的数据缓存组件可按策略解决延迟问题，并在触发云负载喷发方面发挥作用。</span><span class="sxs-lookup"><span data-stu-id="95739-158">A data caching component in your design can strategically address latency issues and play a role in triggering cloud bursting.</span></span> |
| <span data-ttu-id="95739-159">数据引入</span><span class="sxs-lookup"><span data-stu-id="95739-159">Data ingestion</span></span> | <span data-ttu-id="95739-160">可通过多种方式将数据提交到应用，包括 Web 窗体中的用户提交值、持续性的大量数据流，等等。</span><span class="sxs-lookup"><span data-stu-id="95739-160">Data can be submitted to an app in many ways, ranging from user-submitted values in a web form to continuously high-volume data flow.</span></span> |
| <span data-ttu-id="95739-161">数据处理</span><span class="sxs-lookup"><span data-stu-id="95739-161">Data processing</span></span> | <span data-ttu-id="95739-162">可在源中执行数据处理任务（例如报告、分析、批量导出和数据转换），或使用数据副本在独立的组件上减轻这些任务的负载。</span><span class="sxs-lookup"><span data-stu-id="95739-162">Your data processing tasks (such as reports, analytics, batch exports, and data transformation) can either be processed at the source or offloaded on a separate component using a copy of the data.</span></span> |

## <a name="assess-app-components-for-pillars"></a><span data-ttu-id="95739-163">评估应用组件的要素</span><span class="sxs-lookup"><span data-stu-id="95739-163">Assess app components for pillars</span></span>

<span data-ttu-id="95739-164">对于每个组件，需评估其每个要素的特征。</span><span class="sxs-lookup"><span data-stu-id="95739-164">For each component, evaluate its characteristics for each pillar.</span></span> <span data-ttu-id="95739-165">评估每个组件的所有要素时，你可能会认识到以前未曾考虑到的问题对混合应用设计造成的影响。</span><span class="sxs-lookup"><span data-stu-id="95739-165">As you evaluate each component with all of the pillars, questions you might not have considered may become known to you that affect the design of the hybrid app.</span></span> <span data-ttu-id="95739-166">这些注意事项有助于应用的优化。</span><span class="sxs-lookup"><span data-stu-id="95739-166">Acting on these considerations could add value in optimizing your app.</span></span> <span data-ttu-id="95739-167">表 2 描述了每项要素与混合应用之间的关系。</span><span class="sxs-lookup"><span data-stu-id="95739-167">Table 2 provides a description of each pillar as it relates to hybrid apps.</span></span>

### <a name="table-2-pillars"></a><span data-ttu-id="95739-168">表 2.</span><span class="sxs-lookup"><span data-stu-id="95739-168">Table 2.</span></span> <span data-ttu-id="95739-169">要素</span><span class="sxs-lookup"><span data-stu-id="95739-169">Pillars</span></span>

| <span data-ttu-id="95739-170">**要素**</span><span class="sxs-lookup"><span data-stu-id="95739-170">**Pillar**</span></span> | <span data-ttu-id="95739-171">**说明**</span><span class="sxs-lookup"><span data-stu-id="95739-171">**Description**</span></span> |
| ----------- | --------------------------------------------------------- |
| <span data-ttu-id="95739-172">定位</span><span class="sxs-lookup"><span data-stu-id="95739-172">Placement</span></span>  | <span data-ttu-id="95739-173">组件在混合应用中的战略定位。</span><span class="sxs-lookup"><span data-stu-id="95739-173">The strategic positioning of components in hybrid apps.</span></span> |
| <span data-ttu-id="95739-174">可伸缩性</span><span class="sxs-lookup"><span data-stu-id="95739-174">Scalability</span></span>  | <span data-ttu-id="95739-175">系统处理增加的负载的能力。</span><span class="sxs-lookup"><span data-stu-id="95739-175">The ability of a system to handle increased load.</span></span> |
| <span data-ttu-id="95739-176">可用性</span><span class="sxs-lookup"><span data-stu-id="95739-176">Availability</span></span>  | <span data-ttu-id="95739-177">混合应用正常运行的时间比例。</span><span class="sxs-lookup"><span data-stu-id="95739-177">The proportion of time that a hybrid app is functional and working.</span></span> |
| <span data-ttu-id="95739-178">复原能力</span><span class="sxs-lookup"><span data-stu-id="95739-178">Resiliency</span></span> | <span data-ttu-id="95739-179">混合应用的恢复能力。</span><span class="sxs-lookup"><span data-stu-id="95739-179">The ability for a hybrid app to recover.</span></span> |
| <span data-ttu-id="95739-180">可管理性</span><span class="sxs-lookup"><span data-stu-id="95739-180">Manageability</span></span> | <span data-ttu-id="95739-181">让系统在生产环境中持续运行的操作过程。</span><span class="sxs-lookup"><span data-stu-id="95739-181">Operations processes that keep a system running in production.</span></span> |
| <span data-ttu-id="95739-182">安全性</span><span class="sxs-lookup"><span data-stu-id="95739-182">Security</span></span> | <span data-ttu-id="95739-183">保护混合应用和数据免受威胁。</span><span class="sxs-lookup"><span data-stu-id="95739-183">Protecting hybrid apps and data from threats.</span></span> |

## <a name="placement"></a><span data-ttu-id="95739-184">定位</span><span class="sxs-lookup"><span data-stu-id="95739-184">Placement</span></span>

<span data-ttu-id="95739-185">混合应用本身有放置注意事项，例如在数据中心的放置。</span><span class="sxs-lookup"><span data-stu-id="95739-185">A hybrid app inherently has a placement consideration, like for the datacenter.</span></span>

<span data-ttu-id="95739-186">放置是一项重要任务，指通过让组件能够为混合应用提供最佳服务的方式放置组件。</span><span class="sxs-lookup"><span data-stu-id="95739-186">Placement is the important task of positioning components so that they can best service a hybrid app.</span></span> <span data-ttu-id="95739-187">根据定义，混合应用跨多个位置，例如从本地到云，以及位于不同的云之间。</span><span class="sxs-lookup"><span data-stu-id="95739-187">By definition, hybrid apps span locations, like from on-premises to the cloud and among different clouds.</span></span> <span data-ttu-id="95739-188">可通过两种方式将应用的组件放置到云中：</span><span class="sxs-lookup"><span data-stu-id="95739-188">You can place components of the app on clouds in two ways:</span></span>

- <span data-ttu-id="95739-189">**垂直混合应用**</span><span class="sxs-lookup"><span data-stu-id="95739-189">**Vertical hybrid apps**</span></span>  
    <span data-ttu-id="95739-190">应用组件分布在各个位置。</span><span class="sxs-lookup"><span data-stu-id="95739-190">App components are distributed across locations.</span></span> <span data-ttu-id="95739-191">每个组件可以有多个仅位于一个位置的实例。</span><span class="sxs-lookup"><span data-stu-id="95739-191">Each individual component can have multiple instances located only in a single location.</span></span>

- <span data-ttu-id="95739-192">**水平混合应用**</span><span class="sxs-lookup"><span data-stu-id="95739-192">**Horizontal hybrid apps**</span></span>  
    <span data-ttu-id="95739-193">应用组件分布在各个位置。</span><span class="sxs-lookup"><span data-stu-id="95739-193">App components are distributed across locations.</span></span> <span data-ttu-id="95739-194">每个组件可以有多个跨多个位置的实例。</span><span class="sxs-lookup"><span data-stu-id="95739-194">Each individual component can have multiple instances spanning multiple locations.</span></span>

    <span data-ttu-id="95739-195">有些组件可以识别其位置，而有些则完全无法识别其位置和放置方式。</span><span class="sxs-lookup"><span data-stu-id="95739-195">Some components can be aware of their location while others don't have any knowledge of their location and placement.</span></span> <span data-ttu-id="95739-196">这种识别力可通过一个抽象层来实现。</span><span class="sxs-lookup"><span data-stu-id="95739-196">This virtuousness can be achieved with an abstraction layer.</span></span> <span data-ttu-id="95739-197">此层使用新式应用框架（例如微服务），可定义在跨云节点上运行的应用组件如何通过放置来为应用提供服务。</span><span class="sxs-lookup"><span data-stu-id="95739-197">This layer, with a modern app framework like microservices, can define how the app is serviced by the placement of app components operating on nodes across clouds.</span></span>

### <a name="placement-checklist"></a><span data-ttu-id="95739-198">定位查检表</span><span class="sxs-lookup"><span data-stu-id="95739-198">Placement checklist</span></span>

<span data-ttu-id="95739-199">**验证所需的位置。**</span><span class="sxs-lookup"><span data-stu-id="95739-199">**Verify required locations.**</span></span> <span data-ttu-id="95739-200">确保要求应用或其任何组件在特定的云中运行，或者要求经过认证才能在特定云中运行。</span><span class="sxs-lookup"><span data-stu-id="95739-200">Make sure the app or any of its components are required to operate in, or require certification for, a specific cloud.</span></span> <span data-ttu-id="95739-201">这可能包括公司或法律规定的主权要求。</span><span class="sxs-lookup"><span data-stu-id="95739-201">This can include sovereignty requirements from your company or dictated by law.</span></span> <span data-ttu-id="95739-202">此外，确定特定的位置或区域设置是否需要任何本地操作。</span><span class="sxs-lookup"><span data-stu-id="95739-202">Also, determine if any on-premises operations are required for a particular location or locale.</span></span>

<span data-ttu-id="95739-203">**确定连接依赖关系。**</span><span class="sxs-lookup"><span data-stu-id="95739-203">**Ascertain connectivity dependencies.**</span></span> <span data-ttu-id="95739-204">所需的位置和其他因素可以指示组件之间的连接依赖关系。</span><span class="sxs-lookup"><span data-stu-id="95739-204">Required locations and other factors can dictate the connectivity dependencies among your components.</span></span> <span data-ttu-id="95739-205">定位组件时，请确定它们之间的通信的最佳连接和安全性。</span><span class="sxs-lookup"><span data-stu-id="95739-205">As you place the components, determine the optimal connectivity and security for communication among them.</span></span> <span data-ttu-id="95739-206">选项包括 [*VPN*](https://docs.microsoft.com/azure/vpn-gateway/)、[*ExpressRoute*](https://docs.microsoft.com/azure/expressroute/) 和[混合连接](https://docs.microsoft.com/azure/app-service/app-service-hybrid-connections)。</span><span class="sxs-lookup"><span data-stu-id="95739-206">Choices include [*VPN*,](https://docs.microsoft.com/azure/vpn-gateway/) [*ExpressRoute*,](https://docs.microsoft.com/azure/expressroute/) and [*Hybrid Connections*.](https://docs.microsoft.com/azure/app-service/app-service-hybrid-connections)</span></span>

<span data-ttu-id="95739-207">**评估平台功能。**</span><span class="sxs-lookup"><span data-stu-id="95739-207">**Evaluate platform capabilities.**</span></span> <span data-ttu-id="95739-208">对于每个应用组件，请确定云中是否提供了应用组件所需的资源提供程序，以及带宽是否足以应对预期的吞吐量和延迟要求。</span><span class="sxs-lookup"><span data-stu-id="95739-208">For each app component, see if the required resource provider for the app component is available on the cloud and if the bandwidth can accommodate the expected throughput and latency requirements.</span></span>

<span data-ttu-id="95739-209">**规划可移植性。**</span><span class="sxs-lookup"><span data-stu-id="95739-209">**Plan for portability.**</span></span> <span data-ttu-id="95739-210">使用新式应用框架（例如容器或微服务）来规划移动操作以及防止服务依赖项。</span><span class="sxs-lookup"><span data-stu-id="95739-210">Use modern app frameworks, like containers or microservices, to plan for moving operations and to prevent service dependencies.</span></span>

<span data-ttu-id="95739-211">**确定数据主权要求。**</span><span class="sxs-lookup"><span data-stu-id="95739-211">**Determine data sovereignty requirements.**</span></span> <span data-ttu-id="95739-212">混合应用在设计上可以应对数据隔离，例如本地数据中心的数据隔离。</span><span class="sxs-lookup"><span data-stu-id="95739-212">Hybrid apps are geared for accommodating data isolation, such as on a local datacenter.</span></span> <span data-ttu-id="95739-213">请检查资源的定位方式，以进行优化并成功应对此项要求。</span><span class="sxs-lookup"><span data-stu-id="95739-213">Review the placement of your resources to optimize the success for accommodating this requirement.</span></span>

<span data-ttu-id="95739-214">**规划延迟。**</span><span class="sxs-lookup"><span data-stu-id="95739-214">**Plan for latency.**</span></span> <span data-ttu-id="95739-215">云间操作可能会在应用组件之间造成物理间距。</span><span class="sxs-lookup"><span data-stu-id="95739-215">Inter-cloud operations can introduce physical distance between the app components.</span></span> <span data-ttu-id="95739-216">请确定有关应对任何延迟的要求。</span><span class="sxs-lookup"><span data-stu-id="95739-216">Ascertain the requirements to accommodate any latency.</span></span>

<span data-ttu-id="95739-217">**控制流量流。**</span><span class="sxs-lookup"><span data-stu-id="95739-217">**Control traffic flows.**</span></span> <span data-ttu-id="95739-218">在公有云中的前端访问个人身份信息数据时，请控制高峰用量，并确保该数据的传输方式适当且安全。</span><span class="sxs-lookup"><span data-stu-id="95739-218">Handle peak usage and the appropriate and secured communications for personal identifiable information data when accessed by the front end in a public cloud.</span></span>

## <a name="scalability"></a><span data-ttu-id="95739-219">可伸缩性</span><span class="sxs-lookup"><span data-stu-id="95739-219">Scalability</span></span>

<span data-ttu-id="95739-220">可伸缩性是指系统对于应用负载增加的处理能力，此能力可能随着其他因素和作用力而改变，除了影响应用的大小和范围外，还会影响受众规模。</span><span class="sxs-lookup"><span data-stu-id="95739-220">Scalability is the ability of a system to handle increased load on an app, which can vary over time as other factors and forces affect the audience size, in addition to the size and scope of the app.</span></span>

<span data-ttu-id="95739-221">有关此要素的核心介绍，请参阅卓越体系结构五个要素中的[可伸缩性](https://docs.microsoft.com/azure/architecture/guide/pillars#scalability)。</span><span class="sxs-lookup"><span data-stu-id="95739-221">For the core discussion of this pillar, see [*Scalability*](https://docs.microsoft.com/azure/architecture/guide/pillars#scalability) in the five pillars of architecture excellence.</span></span>

<span data-ttu-id="95739-222">通过混合应用的水平缩放方法可以添加更多实例来满足需求，并可在使用频率较低时禁用这些实例。</span><span class="sxs-lookup"><span data-stu-id="95739-222">A horizontal scaling approach for hybrid apps allows for adding more instances to meet demand and then disabling them during quieter periods.</span></span>

<span data-ttu-id="95739-223">在混合方案中，当组件分散到不同的云时，扩展单个组件需要考虑到其他因素。</span><span class="sxs-lookup"><span data-stu-id="95739-223">In hybrid scenarios, scaling out individual components requires additional consideration when components are spread across clouds.</span></span> <span data-ttu-id="95739-224">缩放应用的一个组成部分可能需要同时缩放另一个组成部分。</span><span class="sxs-lookup"><span data-stu-id="95739-224">Scaling one part of the app can require the scaling of another.</span></span> <span data-ttu-id="95739-225">例如，如果客户端连接数增加，但应用的 Web 服务未适当横向扩展，则数据库上的负载可能会使应用达到饱和。</span><span class="sxs-lookup"><span data-stu-id="95739-225">For example, if the number of client connections increases but the app's web services aren't scaled out appropriately, the load on the database might saturate the app.</span></span>

<span data-ttu-id="95739-226">有些应用组件可以线性横向扩展，而有些组件则包含缩放依赖项，因此其缩放能力可能受到限制。</span><span class="sxs-lookup"><span data-stu-id="95739-226">Some app components can scale out linearly, while others have scaling dependencies and might be limited to what extent they're able to scale.</span></span> <span data-ttu-id="95739-227">例如，为应用组件位置提供混合连接的 VPN 隧道在可缩放的带宽和延迟方面存在限制。</span><span class="sxs-lookup"><span data-stu-id="95739-227">For example, a VPN tunnel providing hybrid connectivity for the app components locations has a limit to the bandwidth and latency it can be scaled to.</span></span> <span data-ttu-id="95739-228">要如何缩放应用的组件才能确保符合这些要求呢？</span><span class="sxs-lookup"><span data-stu-id="95739-228">How are components of the app scaled to ensure these requirements are met?</span></span>

### <a name="scalability-checklist"></a><span data-ttu-id="95739-229">可伸缩性清单</span><span class="sxs-lookup"><span data-stu-id="95739-229">Scalability checklist</span></span>

<span data-ttu-id="95739-230">**确定缩放阈值。**</span><span class="sxs-lookup"><span data-stu-id="95739-230">**Ascertain scaling thresholds.**</span></span> <span data-ttu-id="95739-231">若要处理应用中的各种依赖项，请确定应用组件在仍然符合运行应用的要求的前提下，在不同云中可独立缩放到何种程度。</span><span class="sxs-lookup"><span data-stu-id="95739-231">To handle the various dependencies in your app, determine the extent to which app components in different clouds can scale independently of each other, while still meeting the requirements to run the app.</span></span> <span data-ttu-id="95739-232">混合应用通常需要缩放应用中的特定区域，以处理与应用的其余部分交互并造成影响的某个功能。</span><span class="sxs-lookup"><span data-stu-id="95739-232">Hybrid apps often need to scale particular areas in the app to handle a feature as it interacts and affects the rest of the app.</span></span> <span data-ttu-id="95739-233">例如，当前端实例超出某个数量时，可能需要扩展后端。</span><span class="sxs-lookup"><span data-stu-id="95739-233">For example, exceeding a number of front-end instances may require scaling the back end.</span></span>

<span data-ttu-id="95739-234">**定义缩放计划。**</span><span class="sxs-lookup"><span data-stu-id="95739-234">**Define scale schedules.**</span></span> <span data-ttu-id="95739-235">大多数应用都有繁忙时段，因此需要将其高峰时间聚合到计划中，以安排最佳缩放。</span><span class="sxs-lookup"><span data-stu-id="95739-235">Most apps have busy periods, so you need to aggregate their peak times into schedules to coordinate optimal scaling.</span></span>

<span data-ttu-id="95739-236">**使用集中式监视系统。**</span><span class="sxs-lookup"><span data-stu-id="95739-236">**Use a centralized monitoring system.**</span></span> <span data-ttu-id="95739-237">平台监视功能可以提供自动缩放机制，但混合应用需要可聚合系统运行状况和负载的集中式监视系统。</span><span class="sxs-lookup"><span data-stu-id="95739-237">Platform monitoring capabilities can provide autoscaling, but hybrid apps need a centralized monitoring system that aggregates system health and load.</span></span> <span data-ttu-id="95739-238">集中式监视系统可在某个位置开始缩放某个资源，并在另一个位置缩放依赖的资源。</span><span class="sxs-lookup"><span data-stu-id="95739-238">A centralized monitoring system can initiate scaling a resource in one location and scaling depending on resource in another location.</span></span> <span data-ttu-id="95739-239">此外，中心监视系统可跟踪哪些云会自动缩放资源，哪些云不会自动缩放资源。</span><span class="sxs-lookup"><span data-stu-id="95739-239">Additionally, a central monitoring system can track which clouds autoscale resources and which clouds don't.</span></span>

<span data-ttu-id="95739-240">**利用自动缩放功能（如果适用）。**</span><span class="sxs-lookup"><span data-stu-id="95739-240">**Leverage autoscaling capabilities (as available).**</span></span> <span data-ttu-id="95739-241">如果自动缩放功能是体系结构的一部分，则可以通过设置阈值来定义应用组件在何时需要纵向扩展、横向扩展、缩减或缩小，以此实现自动缩放。</span><span class="sxs-lookup"><span data-stu-id="95739-241">If autoscaling capabilities are part of your architecture, you implement autoscaling by setting thresholds that define when an app component needs to be scaled up, out, down, or in.</span></span> <span data-ttu-id="95739-242">自动缩放的一个示例是，客户端连接在一个云中进行自动缩放，以处理增加的容量，但同时使分散于不同云中的其他应用依赖项也进行缩放。</span><span class="sxs-lookup"><span data-stu-id="95739-242">An example of autoscaling is a client connection that's autoscaled in one cloud to handle increased capacity, but causes other dependencies of the app, spread across different clouds, to also be scaled.</span></span> <span data-ttu-id="95739-243">必须确定这些依赖组件是否有自动缩放功能。</span><span class="sxs-lookup"><span data-stu-id="95739-243">The autoscaling capabilities of these dependent components must be ascertained.</span></span>

<span data-ttu-id="95739-244">如果无法使用自动缩放，请考虑实现脚本和其他资源，以适应集中式监视系统中的阈值所触发的手动缩放。</span><span class="sxs-lookup"><span data-stu-id="95739-244">If autoscaling isn't available, consider implementing scripts and other resources to accommodate manual scaling, triggered by thresholds in the centralized monitoring system.</span></span>

<span data-ttu-id="95739-245">**按位置确定预期负载。**</span><span class="sxs-lookup"><span data-stu-id="95739-245">**Determine expected load by location.**</span></span> <span data-ttu-id="95739-246">处理客户端请求的混合应用可能主要依赖于单个位置。</span><span class="sxs-lookup"><span data-stu-id="95739-246">Hybrid apps that handle client requests might primarily rely on a single location.</span></span> <span data-ttu-id="95739-247">当客户端请求的负载超过阈值时，可以在不同的位置添加额外的资源，以分散入站请求的负载。</span><span class="sxs-lookup"><span data-stu-id="95739-247">When the load of client requests exceeds a threshold, additional resources can be added in a different location to distribute the load of inbound requests.</span></span> <span data-ttu-id="95739-248">确保客户端连接可以处理增加的负载，并确定是否有任何自动化过程可供客户端连接处理负载。</span><span class="sxs-lookup"><span data-stu-id="95739-248">Make sure that the client connections can handle the increased loads and also determine any automated procedures for the client connections to handle the load.</span></span>

## <a name="availability"></a><span data-ttu-id="95739-249">可用性</span><span class="sxs-lookup"><span data-stu-id="95739-249">Availability</span></span>

<span data-ttu-id="95739-250">可用性是指系统正常运行的时间。</span><span class="sxs-lookup"><span data-stu-id="95739-250">Availability is the time that a system is functional and working.</span></span> <span data-ttu-id="95739-251">可用性以正常运行时间百分比来计量。</span><span class="sxs-lookup"><span data-stu-id="95739-251">Availability is measured as a percentage of uptime.</span></span> <span data-ttu-id="95739-252">应用错误、基础结构问题和系统负载全都会降低可用性。</span><span class="sxs-lookup"><span data-stu-id="95739-252">App errors, infrastructure problems, and system load can all reduce availability.</span></span>

<span data-ttu-id="95739-253">有关此要素的核心介绍，请参阅卓越体系结构五个要素中的[可用性](/azure/architecture/framework/)。</span><span class="sxs-lookup"><span data-stu-id="95739-253">For the core discussion of this pillar, see [*Availability*](/azure/architecture/framework/) in the five pillars of architecture excellence.</span></span>

### <a name="availability-checklist"></a><span data-ttu-id="95739-254">可用性核对清单</span><span class="sxs-lookup"><span data-stu-id="95739-254">Availability checklist</span></span>

<span data-ttu-id="95739-255">**为连接提供冗余。**</span><span class="sxs-lookup"><span data-stu-id="95739-255">**Provide redundancy for connectivity.**</span></span> <span data-ttu-id="95739-256">混合应用要求在应用所分散到的云之间建立连接。</span><span class="sxs-lookup"><span data-stu-id="95739-256">Hybrid apps require connectivity among the clouds that the app is spread across.</span></span> <span data-ttu-id="95739-257">可为混合连接选择所需的技术，因此，除了选择的主要技术外，还可以使用另一项技术来提供冗余能力，以便在主要技术发生故障时进行自动化故障转移。</span><span class="sxs-lookup"><span data-stu-id="95739-257">You have a choice of technologies for hybrid connectivity, so in addition to your primary technology choice, use another technology to provide redundancy with automated failover capabilities should the primary technology fail.</span></span>

<span data-ttu-id="95739-258">**对容错域进行分类。**</span><span class="sxs-lookup"><span data-stu-id="95739-258">**Classify fault domains.**</span></span> <span data-ttu-id="95739-259">可容错的应用需要多个容错域。</span><span class="sxs-lookup"><span data-stu-id="95739-259">Fault-tolerant apps require multiple fault domains.</span></span> <span data-ttu-id="95739-260">容错域有助于找到故障点，例如，是本地的单个硬盘故障、架顶式交换机故障，还是整个数据中心不可用。</span><span class="sxs-lookup"><span data-stu-id="95739-260">Fault domains help isolate the point of failure, such as if a single hard disk fails on premises, if a top-of-rack switch goes down, or if the full datacenter is unavailable.</span></span> <span data-ttu-id="95739-261">在混合应用中，可将某个位置分类为容错域。</span><span class="sxs-lookup"><span data-stu-id="95739-261">In a hybrid app, a location can be classified as a fault domain.</span></span> <span data-ttu-id="95739-262">可用性要求越高，就越需要评估单个容错域的分类方式。</span><span class="sxs-lookup"><span data-stu-id="95739-262">With more availability requirements, the more you need to evaluate how a single fault domain should be classified.</span></span>

<span data-ttu-id="95739-263">**对升级域进行分类。**</span><span class="sxs-lookup"><span data-stu-id="95739-263">**Classify upgrade domains.**</span></span> <span data-ttu-id="95739-264">升级域用于确保应用组件的实例在相同组件的其他实例进行更新或功能升级时仍保持可用。</span><span class="sxs-lookup"><span data-stu-id="95739-264">Upgrade domains are used to ensure that instances of app components are available, while other instances of the same component are being serviced with updates or feature upgrades.</span></span> <span data-ttu-id="95739-265">与容错域一样，升级域也可按其定位位置来分类。</span><span class="sxs-lookup"><span data-stu-id="95739-265">As with fault domains, upgrade domains can be classified by their placement across locations.</span></span> <span data-ttu-id="95739-266">必须确定某个应用组件是否可先在某个位置升级后再在另一个位置升级，或者是否需要进行其他域配置。</span><span class="sxs-lookup"><span data-stu-id="95739-266">You must determine if an app component can accommodate getting upgraded in one location before it's upgraded in another location, or if other domain configurations are required.</span></span> <span data-ttu-id="95739-267">单个位置本身可以包含多个升级域。</span><span class="sxs-lookup"><span data-stu-id="95739-267">A single location itself can have multiple upgrade domains.</span></span>

<span data-ttu-id="95739-268">**跟踪实例和可用性。**</span><span class="sxs-lookup"><span data-stu-id="95739-268">**Track instances and availability.**</span></span> <span data-ttu-id="95739-269">高可用性应用组件可通过负载均衡和同步数据复制进行使用。</span><span class="sxs-lookup"><span data-stu-id="95739-269">Highly available app components can be available through load balancing and synchronous data replication.</span></span> <span data-ttu-id="95739-270">必须确定在服务中断之前最多可以有多少个实例脱机。</span><span class="sxs-lookup"><span data-stu-id="95739-270">You must determine how many instances can be offline before the service is interrupted.</span></span>

<span data-ttu-id="95739-271">**实施自我修复。**</span><span class="sxs-lookup"><span data-stu-id="95739-271">**Implement self-healing.**</span></span> <span data-ttu-id="95739-272">当某个问题导致应用可用性中断时，监视系统的检测可以启动对应用的自我修复活动，例如清空有故障的实例并重新部署。</span><span class="sxs-lookup"><span data-stu-id="95739-272">In the event an issue causes an interruption to the app availability, a detection by a monitoring system could initiate self-healing activities to the app, such as draining the failed instance and redeploying it.</span></span> <span data-ttu-id="95739-273">这很有可能需要一个中心监视解决方案，并与混合持续集成和持续交付 (CI/CD) 管道相集成。</span><span class="sxs-lookup"><span data-stu-id="95739-273">Most likely this requires a central monitoring solution, integrated with a hybrid Continuous Integration, and Continuous Delivery (CI/CD) pipeline.</span></span> <span data-ttu-id="95739-274">应用可与监视系统集成，以确定可能需要重新部署应用组件的问题。</span><span class="sxs-lookup"><span data-stu-id="95739-274">The app is integrated with a monitoring system to identify issues that could require redeployment of an app component.</span></span> <span data-ttu-id="95739-275">监视系统还可触发混合 CI/CD 以重新部署应用组件，甚至位于相同或其他位置中的其他任何依赖组件。</span><span class="sxs-lookup"><span data-stu-id="95739-275">The monitoring system can also trigger hybrid CI/CD to redeploy the app component and potentially any other dependent components in the same or other locations.</span></span>

<span data-ttu-id="95739-276">**维护服务级别协议 (SLA)。**</span><span class="sxs-lookup"><span data-stu-id="95739-276">**Maintain service-level agreements (SLAs).**</span></span> <span data-ttu-id="95739-277">在所有协议中，若要使你为客户提供的服务和应用保持连接，可用性都是关键所在。</span><span class="sxs-lookup"><span data-stu-id="95739-277">Availability is critical for any agreements to maintain connectivity to the services and apps that you have with your customers.</span></span> <span data-ttu-id="95739-278">混合应用所依赖的每个位置都可能有其自己的 SLA。</span><span class="sxs-lookup"><span data-stu-id="95739-278">Each location that your hybrid app relies on might have its own SLA.</span></span> <span data-ttu-id="95739-279">这些不同的 SLA 可能影响混合应用的整体 SLA。</span><span class="sxs-lookup"><span data-stu-id="95739-279">These different SLAs can affect the overall SLA of your hybrid app.</span></span>

## <a name="resiliency"></a><span data-ttu-id="95739-280">复原能力</span><span class="sxs-lookup"><span data-stu-id="95739-280">Resiliency</span></span>

<span data-ttu-id="95739-281">复原能力是指混合应用和系统在发生故障后进行恢复，然后继续正常运行的能力。</span><span class="sxs-lookup"><span data-stu-id="95739-281">Resiliency is the ability for a hybrid app and system to recover from failures and continue to function.</span></span> <span data-ttu-id="95739-282">复原能力的目标是在故障发生后将应用恢复到可完全正常运行的状态。</span><span class="sxs-lookup"><span data-stu-id="95739-282">The goal of resiliency is to return the app to a fully functioning state after a failure occurs.</span></span> <span data-ttu-id="95739-283">恢复策略包括备份、复制和灾难恢复等解决方案。</span><span class="sxs-lookup"><span data-stu-id="95739-283">Resiliency strategies include solutions like backup, replication, and disaster recovery.</span></span>

<span data-ttu-id="95739-284">有关此要素的核心介绍，请参阅卓越体系结构五个要素中的[复原能力](https://docs.microsoft.com/azure/architecture/guide/pillars#resiliency)。</span><span class="sxs-lookup"><span data-stu-id="95739-284">For the core discussion of this pillar, see [*Resiliency*](https://docs.microsoft.com/azure/architecture/guide/pillars#resiliency) in the five pillars of architecture excellence.</span></span>

### <a name="resiliency-checklist"></a><span data-ttu-id="95739-285">复原能力查检表</span><span class="sxs-lookup"><span data-stu-id="95739-285">Resiliency checklist</span></span>

<span data-ttu-id="95739-286">**发现灾难恢复依赖项。**</span><span class="sxs-lookup"><span data-stu-id="95739-286">**Uncover disaster-recovery dependencies.**</span></span> <span data-ttu-id="95739-287">在一个云中进行灾难恢复可能需要更改另一个云中的应用组件。</span><span class="sxs-lookup"><span data-stu-id="95739-287">Disaster recovery in one cloud might require changes to app components in another cloud.</span></span> <span data-ttu-id="95739-288">如果一个云中的一个或多个组件故障转移到另一个位置（在相同或不同的云中），则需要使依赖组件能够意识到这些更改。</span><span class="sxs-lookup"><span data-stu-id="95739-288">If one or multiple components from one cloud are failed-over to another location, either within the same cloud or to another cloud, the dependent components need to be made aware of these changes.</span></span> <span data-ttu-id="95739-289">这还包括连接依赖项。</span><span class="sxs-lookup"><span data-stu-id="95739-289">This also includes the connectivity dependencies.</span></span> <span data-ttu-id="95739-290">若要获得复原能力，需要针对每个云制定经过全面测试的应用恢复计划。</span><span class="sxs-lookup"><span data-stu-id="95739-290">Resiliency requires a fully tested app recovery plan for each cloud.</span></span>

<span data-ttu-id="95739-291">**建立恢复流。**</span><span class="sxs-lookup"><span data-stu-id="95739-291">**Establish recovery flow.**</span></span> <span data-ttu-id="95739-292">有效的恢复流设计已评估应用组件是否有能力适应缓冲区、重试、重试失败的数据传输，以及是否能根据需要回退到其他服务或工作流。</span><span class="sxs-lookup"><span data-stu-id="95739-292">An effective recovery flow design has evaluated app components for their ability to accommodate buffers, retries, retrying failed data transfer, and, if necessary, fall back to a different service or workflow.</span></span> <span data-ttu-id="95739-293">必须确定要使用的备份机制、还原过程涉及的活动，及其测试频率。</span><span class="sxs-lookup"><span data-stu-id="95739-293">You must determine what back-up mechanism to use, what its restore procedure involves, and how often it's tested.</span></span> <span data-ttu-id="95739-294">还应确定增量和完整备份的频率。</span><span class="sxs-lookup"><span data-stu-id="95739-294">You should also determine the frequency for both incremental and full backups.</span></span>

<span data-ttu-id="95739-295">**测试部分恢复。**</span><span class="sxs-lookup"><span data-stu-id="95739-295">**Test partial recoveries.**</span></span> <span data-ttu-id="95739-296">应用组成部分的部分恢复可向用户再次保证整体可用性。</span><span class="sxs-lookup"><span data-stu-id="95739-296">A partial recovery for part of the app can provide reassurance to users that all isn't unavailable.</span></span> <span data-ttu-id="95739-297">此计划部分应确保部分还原没有任何副作用，例如，备份和还原服务与应用交互，并在备份之前正常关闭。</span><span class="sxs-lookup"><span data-stu-id="95739-297">This part of the plan should ensure that a partial restore doesn't have any side effects, such as a backup and restore service that interacts with the app to gracefully shut it down before the backup is made.</span></span>

<span data-ttu-id="95739-298">**确定灾难恢复调查人员并分配职责。**</span><span class="sxs-lookup"><span data-stu-id="95739-298">**Determine disaster-recovery instigators and assign responsibility.**</span></span> <span data-ttu-id="95739-299">恢复计划应在可备份和还原的项目以外，连带说明哪些人员和哪些角色可以启动备份和恢复操作。</span><span class="sxs-lookup"><span data-stu-id="95739-299">A recovery plan should describe who, and what roles, can initiate backup and recovery actions in addition to what can be backed up and restored.</span></span>

<span data-ttu-id="95739-300">**比较自我修复阈值与灾难恢复。**</span><span class="sxs-lookup"><span data-stu-id="95739-300">**Compare self-healing thresholds with disaster recovery.**</span></span> <span data-ttu-id="95739-301">确定应用启动自动恢复的自我修复能力，并将应用的自我修复视为失败或成功所需的时间。</span><span class="sxs-lookup"><span data-stu-id="95739-301">Determine an app's self-healing capabilities for automatic recovery initiation and the time required for an app's self- healing to be considered a failure or success.</span></span> <span data-ttu-id="95739-302">确定每个云的阈值。</span><span class="sxs-lookup"><span data-stu-id="95739-302">Determine the thresholds for each cloud.</span></span>

<span data-ttu-id="95739-303">**验证复原功能的可用性。**</span><span class="sxs-lookup"><span data-stu-id="95739-303">**Verify availability of resiliency features.**</span></span> <span data-ttu-id="95739-304">对每个位置确定复原功能的可用性。</span><span class="sxs-lookup"><span data-stu-id="95739-304">Determine the availability of resiliency features and capabilities for each location.</span></span> <span data-ttu-id="95739-305">如果某个位置未提供所需的功能，请考虑将该位置集成到可提供复原功能的集中式服务中。</span><span class="sxs-lookup"><span data-stu-id="95739-305">If a location doesn't provide the required capabilities, consider integrating that location into a centralized service that provides the resiliency features.</span></span>

<span data-ttu-id="95739-306">**确定停机时间。**</span><span class="sxs-lookup"><span data-stu-id="95739-306">**Determine downtimes.**</span></span> <span data-ttu-id="95739-307">确定对整个应用和应用组件进行维护而造成的预期停机时间。</span><span class="sxs-lookup"><span data-stu-id="95739-307">Determine the expected downtime due to maintenance for the app as a whole and as app components.</span></span>

<span data-ttu-id="95739-308">**制定故障排除过程的文档。**</span><span class="sxs-lookup"><span data-stu-id="95739-308">**Document troubleshooting procedures.**</span></span> <span data-ttu-id="95739-309">定义用于重新部署资源和应用组件的故障排除过程。</span><span class="sxs-lookup"><span data-stu-id="95739-309">Define troubleshooting procedures for redeploying resources and app components.</span></span>

## <a name="manageability"></a><span data-ttu-id="95739-310">可管理性</span><span class="sxs-lookup"><span data-stu-id="95739-310">Manageability</span></span>

<span data-ttu-id="95739-311">在设计体系结构时，管理混合应用的方式是非常重要的注意事项。</span><span class="sxs-lookup"><span data-stu-id="95739-311">The considerations for how you manage your hybrid apps are critical in designing your architecture.</span></span> <span data-ttu-id="95739-312">妥善管理的混合应用可提供代码形式的基础结构，实现在通用开发管道中集成一致的应用代码。</span><span class="sxs-lookup"><span data-stu-id="95739-312">A well-managed hybrid app provides an infrastructure as code that enables the integration of consistent app code in a common development pipeline.</span></span> <span data-ttu-id="95739-313">通过对基础结构的更改实现一致的系统范围测试和单独测试，当更改通过测试时，可以确保集成的部署允许将这些更改合并到源代码中。</span><span class="sxs-lookup"><span data-stu-id="95739-313">By implementing consistent system-wide and individual testing of changes to the infrastructure, you can ensure an integrated deployment if the changes pass the tests, allowing them to be merged into the source code.</span></span>

<span data-ttu-id="95739-314">有关此要素的核心介绍，请参阅卓越体系结构五个要素中的 [DevOps](/azure/architecture/framework/#devops)。</span><span class="sxs-lookup"><span data-stu-id="95739-314">For the core discussion of this pillar, see [*DevOps*](/azure/architecture/framework/#devops) in the five pillars of architecture excellence.</span></span>

### <a name="manageability-checklist"></a><span data-ttu-id="95739-315">可管理性查检表</span><span class="sxs-lookup"><span data-stu-id="95739-315">Manageability checklist</span></span>

<span data-ttu-id="95739-316">**实施监视。**</span><span class="sxs-lookup"><span data-stu-id="95739-316">**Implement monitoring.**</span></span> <span data-ttu-id="95739-317">使用跨云分散的应用组件的集中式监视系统，提供其运行状况和性能的聚合视图。</span><span class="sxs-lookup"><span data-stu-id="95739-317">Use a centralized monitoring system of app components spread across clouds to provide an aggregated view of their health and performance.</span></span> <span data-ttu-id="95739-318">此系统可同时监视应用组件和相关的平台功能。</span><span class="sxs-lookup"><span data-stu-id="95739-318">This system includes monitoring both the app components and related platform capabilities.</span></span>

<span data-ttu-id="95739-319">确定需要监视应用的哪些组成部分。</span><span class="sxs-lookup"><span data-stu-id="95739-319">Determine the parts of the app that require monitoring.</span></span>

<span data-ttu-id="95739-320">**协调策略。**</span><span class="sxs-lookup"><span data-stu-id="95739-320">**Coordinate policies.**</span></span> <span data-ttu-id="95739-321">混合应用跨越的每个位置都可以有其自己的策略，其中涵盖了允许的资源类型、命名约定、标记和其他条件。</span><span class="sxs-lookup"><span data-stu-id="95739-321">Each location that a hybrid app spans can have its own policy that covers allowed resource types, naming conventions, tags, and other criteria.</span></span>

<span data-ttu-id="95739-322">**定义和使用角色。**</span><span class="sxs-lookup"><span data-stu-id="95739-322">**Define and use roles.**</span></span> <span data-ttu-id="95739-323">作为数据库管理员，你必须确定需要访问应用资源的不同角色（例如应用所有者、数据库管理员和最终用户）所需的权限。</span><span class="sxs-lookup"><span data-stu-id="95739-323">As a database admin, you need to determine the permissions required for different personas (like an app owner, a database admin, and an end user) that need to access app resources.</span></span> <span data-ttu-id="95739-324">需要针对资源并在应用内部配置这些权限。</span><span class="sxs-lookup"><span data-stu-id="95739-324">These permissions need to be configured on the resources and inside the app.</span></span> <span data-ttu-id="95739-325">使用基于角色的访问控制 (RBAC) 系统可以针对应用资源设置这些权限。</span><span class="sxs-lookup"><span data-stu-id="95739-325">A role-based access control (RBAC) system allows you to set these permissions on the app resources.</span></span> <span data-ttu-id="95739-326">将所有资源部署在单个云中时，这些访问权限将难以处理；当资源分散在不同的云中时，更需要加以慎重。</span><span class="sxs-lookup"><span data-stu-id="95739-326">These access rights are challenging when all resources are deployed in a single cloud but require even more attention when the resources are spread across clouds.</span></span> <span data-ttu-id="95739-327">在一个云中设置的资源权限不会应用到另一个云中设置的资源。</span><span class="sxs-lookup"><span data-stu-id="95739-327">Permissions on resources set in one cloud don't apply to resources set in another cloud.</span></span>

<span data-ttu-id="95739-328">**使用 CI/CD 管道。**</span><span class="sxs-lookup"><span data-stu-id="95739-328">**Use CI/CD pipelines.**</span></span> <span data-ttu-id="95739-329">持续集成和持续开发 (CI/CD) 管道可提供一致的流程用于创作和部署跨云的应用，并为其基础结构和应用提供质量保证。</span><span class="sxs-lookup"><span data-stu-id="95739-329">A Continuous Integration and Continuous Development (CI/CD) pipeline can provide a consistent process for authoring and deploying apps that span across clouds, and to provide quality assurance for their infrastructure and app.</span></span> <span data-ttu-id="95739-330">使用此管道可在一个云中测试基础结构和应用，然后将其部署到另一个云中。</span><span class="sxs-lookup"><span data-stu-id="95739-330">This pipeline enables the infrastructure and app to be tested on one cloud and deployed on another cloud.</span></span> <span data-ttu-id="95739-331">该管道甚至允许将混合应用的某些组件部署到一个云，并将其他组件部署到另一个云，从而在本质上构成混合应用部署的基础。</span><span class="sxs-lookup"><span data-stu-id="95739-331">The pipeline even allows you to deploy certain components of your hybrid app to one cloud and other components to another cloud, essentially forming the foundation for hybrid app deployment.</span></span> <span data-ttu-id="95739-332">处理应用组件在安装期间的相互依赖关系时（例如 Web 应用需要数据库的连接字符串），CI/CD 系统至关重要。</span><span class="sxs-lookup"><span data-stu-id="95739-332">A CI/CD system is critical for handling the dependencies app components have for each other during installation, such as the web app needing a connection string to the database.</span></span>

<span data-ttu-id="95739-333">**管理生命周期。**</span><span class="sxs-lookup"><span data-stu-id="95739-333">**Manage the life cycle.**</span></span> <span data-ttu-id="95739-334">因为混合应用的资源可跨多个位置，所以需要将每个位置的生命周期管理功能聚合成单个生命周期管理单元。</span><span class="sxs-lookup"><span data-stu-id="95739-334">Because resources of a hybrid app can span locations, each single location's life-cycle management capability needs to be aggregated into a single life-cycle management unit.</span></span> <span data-ttu-id="95739-335">请考虑这些资源的创建、更新和删除方式。</span><span class="sxs-lookup"><span data-stu-id="95739-335">Consider how they're created, updated, and deleted.</span></span>

<span data-ttu-id="95739-336">**检查故障排除策略。**</span><span class="sxs-lookup"><span data-stu-id="95739-336">**Examine troubleshooting strategies.**</span></span> <span data-ttu-id="95739-337">相较于在单个云中运行的相同应用，对混合应用进行故障排除涉及的应用组件更多。</span><span class="sxs-lookup"><span data-stu-id="95739-337">Troubleshooting a hybrid app involves more app components than the same app that's running in a single cloud.</span></span> <span data-ttu-id="95739-338">除了需要在云之间建立连接以外，还要考虑到应用是在两个平台而不是一个平台上运行。</span><span class="sxs-lookup"><span data-stu-id="95739-338">Besides the connectivity between the clouds, the app is running on two platforms instead of one.</span></span> <span data-ttu-id="95739-339">对混合应用进行故障排除的重要任务之一是，检查应用组件的聚合运行状况和性能监视情况。</span><span class="sxs-lookup"><span data-stu-id="95739-339">An important task in troubleshooting hybrid apps is to examine the aggregated health and performance monitoring of the app components.</span></span>

## <a name="security"></a><span data-ttu-id="95739-340">安全性</span><span class="sxs-lookup"><span data-stu-id="95739-340">Security</span></span>

<span data-ttu-id="95739-341">安全性是所有云应用的主要注意事项之一，其对混合云应用而言更为关键。</span><span class="sxs-lookup"><span data-stu-id="95739-341">Security is one of the primary considerations for any cloud app and it becomes even more critical for hybrid cloud apps.</span></span>

<span data-ttu-id="95739-342">有关此要素的核心介绍，请参阅卓越体系结构五个要素中的[安全性](https://docs.microsoft.com/azure/architecture/guide/pillars#security)。</span><span class="sxs-lookup"><span data-stu-id="95739-342">For the core discussion of this pillar, see [*Security*](https://docs.microsoft.com/azure/architecture/guide/pillars#security) in the five pillars of architecture excellence.</span></span>

### <a name="security-checklist"></a><span data-ttu-id="95739-343">安全清单</span><span class="sxs-lookup"><span data-stu-id="95739-343">Security checklist</span></span>

<span data-ttu-id="95739-344">**假想安全漏洞。**</span><span class="sxs-lookup"><span data-stu-id="95739-344">**Assume breach.**</span></span> <span data-ttu-id="95739-345">如果应用的某个组成部分遭到入侵，请确保有现成的解决方案可将安全漏洞的扩散范围缩减至最小（不仅指在同一位置，还指在各个位置）。</span><span class="sxs-lookup"><span data-stu-id="95739-345">If one part of the app is compromised, ensure there are solutions in place to minimize the spread of the breach, not only within the same location but also across locations.</span></span>

<span data-ttu-id="95739-346">**监视允许的网络访问。**</span><span class="sxs-lookup"><span data-stu-id="95739-346">**Monitor allowed network access.**</span></span> <span data-ttu-id="95739-347">确定应用的网络访问策略，例如只从特定子网访问应用，以及在组件之间仅允许使用应用正常运行所需的基本端口和协议。</span><span class="sxs-lookup"><span data-stu-id="95739-347">Determine the network access policies for the app, such as only accessing the app from a specific subnet and only allow the minimum ports and protocols between the components required for the app to function properly.</span></span>

<span data-ttu-id="95739-348">**使用可靠的身份验证。**</span><span class="sxs-lookup"><span data-stu-id="95739-348">**Employ robust authentication.**</span></span> <span data-ttu-id="95739-349">可靠的身份验证方案对于应用的安全性而言至关重要。</span><span class="sxs-lookup"><span data-stu-id="95739-349">A robust authentication scheme is critical for the security of your app.</span></span> <span data-ttu-id="95739-350">考虑使用可提供单一登录功能的联合标识提供者，并采用以下一种或多种方案：用户名和密码登录、公钥和私钥、双重或多重身份验证，以及受信任的安全组。</span><span class="sxs-lookup"><span data-stu-id="95739-350">Consider using a federated identity provider that provides single sign-on capabilities and employs one or more of the following schemes: username and password sign-on, public and private keys, two-factor or multi-factor authentication, and trusted security groups.</span></span> <span data-ttu-id="95739-351">除了证书类型及相关要求以外，确定要使用哪些适当的资源来存储用于应用身份验证的敏感数据和其他机密。</span><span class="sxs-lookup"><span data-stu-id="95739-351">Determine the appropriate resources to store sensitive data and other secrets for app authentication in addition to certificate types and their requirements.</span></span>

<span data-ttu-id="95739-352">**使用加密。**</span><span class="sxs-lookup"><span data-stu-id="95739-352">**Use encryption.**</span></span> <span data-ttu-id="95739-353">确定应用的哪些区域要使用加密，例如，用于数据存储或客户端通信和访问。</span><span class="sxs-lookup"><span data-stu-id="95739-353">Identify which areas of the app use encryption, such as for data storage or client communication and access.</span></span>

<span data-ttu-id="95739-354">**使用安全通道。**</span><span class="sxs-lookup"><span data-stu-id="95739-354">**Use secure channels.**</span></span> <span data-ttu-id="95739-355">云间必须存在安全通道才能提供安全性和身份验证检查、实时保护、隔离和其他跨云服务。</span><span class="sxs-lookup"><span data-stu-id="95739-355">A secure channel across the clouds is critical for providing security and authentication checks, real-time protection, quarantine, and other services across clouds.</span></span>

<span data-ttu-id="95739-356">**定义和使用角色。**</span><span class="sxs-lookup"><span data-stu-id="95739-356">**Define and use roles.**</span></span> <span data-ttu-id="95739-357">对跨云的资源配置和单一标识访问实施角色。</span><span class="sxs-lookup"><span data-stu-id="95739-357">Implement roles for resource configurations and single-identity access across clouds.</span></span> <span data-ttu-id="95739-358">确定应用及其平台资源的基于角色的访问控制 (RBAC) 要求。</span><span class="sxs-lookup"><span data-stu-id="95739-358">Determine the role-based access control (RBAC) requirements for the app and its platform resources.</span></span>

<span data-ttu-id="95739-359">**审核系统。**</span><span class="sxs-lookup"><span data-stu-id="95739-359">**Audit your system.**</span></span> <span data-ttu-id="95739-360">系统监视可以记录和聚合来自应用组件和相关云平台操作的数据。</span><span class="sxs-lookup"><span data-stu-id="95739-360">System monitoring can log and aggregate data from both the app components and the related cloud platform operations.</span></span>

## <a name="summary"></a><span data-ttu-id="95739-361">摘要</span><span class="sxs-lookup"><span data-stu-id="95739-361">Summary</span></span>

<span data-ttu-id="95739-362">本文提供在创作和设计混合应用期间必须考虑到的项目的清单。</span><span class="sxs-lookup"><span data-stu-id="95739-362">This article provides a checklist of items that are important to consider during the authoring and designing of your hybrid apps.</span></span> <span data-ttu-id="95739-363">在部署应用之前先查看这些要素可以防止在生产中断时遇到这些问题，并有助于避免重新考虑你的设计。</span><span class="sxs-lookup"><span data-stu-id="95739-363">Reviewing these pillars before you deploy your app prevents you from running into these questions in production outages and potentially requiring you to revisit your design.</span></span>

<span data-ttu-id="95739-364">此项预备任务看似非常耗时，但如果根据这些要素设计应用，你的付出很快就能得到回报。</span><span class="sxs-lookup"><span data-stu-id="95739-364">It can seem like a time-consuming task beforehand, but you easily get your return on investment if you design your app based on these pillars.</span></span>

## <a name="next-steps"></a><span data-ttu-id="95739-365">后续步骤</span><span class="sxs-lookup"><span data-stu-id="95739-365">Next steps</span></span>

<span data-ttu-id="95739-366">有关详细信息，请参阅以下资源：</span><span class="sxs-lookup"><span data-stu-id="95739-366">For more information, see the following resources:</span></span>

- [<span data-ttu-id="95739-367">混合云</span><span class="sxs-lookup"><span data-stu-id="95739-367">Hybrid cloud</span></span>](https://azure.microsoft.com/overview/hybrid-cloud/)
- [<span data-ttu-id="95739-368">混合云应用</span><span class="sxs-lookup"><span data-stu-id="95739-368">Hybrid cloud apps</span></span>](https://azure.microsoft.com/solutions/hybrid-cloud-app/)
- [<span data-ttu-id="95739-369">开发用于实现云一致性的 Azure 资源管理器模板</span><span class="sxs-lookup"><span data-stu-id="95739-369">Develop Azure Resource Manager templates for cloud consistency</span></span>](https://aka.ms/consistency)
