---
title: 使用 Azure 和 Azure Stack Hub 的分层数据分析模式
description: 了解如何使用 Azure 和 Azure Stack Hub 在整个混合云中实现分层数据解决方案。
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: b671fa9f47fa51ab6e40633c04964957d613fec2
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 06/17/2020
ms.locfileid: "84909963"
---
# <a name="tiered-data-for-analytics-pattern"></a><span data-ttu-id="c52d5-103">分层数据分析模式</span><span class="sxs-lookup"><span data-stu-id="c52d5-103">Tiered data for analytics pattern</span></span>

<span data-ttu-id="c52d5-104">本模式演示如何使用 Azure Stack Hub 和 Azure 跨多个本地与云位置暂存、分析、处理及存储数据。</span><span class="sxs-lookup"><span data-stu-id="c52d5-104">This pattern illustrates how to use Azure Stack Hub and Azure to stage, analyze, process, sanitize, and store data across multiple on-premises and cloud locations.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="c52d5-105">上下文和问题</span><span class="sxs-lookup"><span data-stu-id="c52d5-105">Context and problem</span></span>

<span data-ttu-id="c52d5-106">新式技术领域中的企业组织所面临的一个问题是如何实现安全的数据存储、处理和分析。</span><span class="sxs-lookup"><span data-stu-id="c52d5-106">One of the problems facing enterprise organizations in the modern technology landscape concerns secure data storage, processing, and analyzing.</span></span> <span data-ttu-id="c52d5-107">考虑因素包括：</span><span class="sxs-lookup"><span data-stu-id="c52d5-107">Considerations include:</span></span>

- <span data-ttu-id="c52d5-108">数据内容</span><span class="sxs-lookup"><span data-stu-id="c52d5-108">data content</span></span>
- <span data-ttu-id="c52d5-109">location</span><span class="sxs-lookup"><span data-stu-id="c52d5-109">location</span></span>
- <span data-ttu-id="c52d5-110">安全和隐私要求</span><span class="sxs-lookup"><span data-stu-id="c52d5-110">security and privacy requirements</span></span>
- <span data-ttu-id="c52d5-111">访问权限</span><span class="sxs-lookup"><span data-stu-id="c52d5-111">access permissions</span></span>
- <span data-ttu-id="c52d5-112">维护</span><span class="sxs-lookup"><span data-stu-id="c52d5-112">maintenance</span></span>
- <span data-ttu-id="c52d5-113">存储仓库</span><span class="sxs-lookup"><span data-stu-id="c52d5-113">storage warehousing</span></span>

<span data-ttu-id="c52d5-114">将 Azure 与 Azure Stack Hub 相结合可以解决数据方面的忧虑，并提供低成本的解决方案。</span><span class="sxs-lookup"><span data-stu-id="c52d5-114">Azure, in combination with Azure Stack Hub, addresses data concerns and offers low-cost solutions.</span></span> <span data-ttu-id="c52d5-115">此解决方案最适合通过分布式制造或物流公司来表达。</span><span class="sxs-lookup"><span data-stu-id="c52d5-115">This solution is best expressed through a distributed manufacturing or logistics company.</span></span>

<span data-ttu-id="c52d5-116">此解决方案基于以下方案：</span><span class="sxs-lookup"><span data-stu-id="c52d5-116">The solution is based on the following scenario:</span></span>

- <span data-ttu-id="c52d5-117">大型的多分支制造组织。</span><span class="sxs-lookup"><span data-stu-id="c52d5-117">A large multi-branch manufacturing organization.</span></span>
- <span data-ttu-id="c52d5-118">需要在全球远地位置与中央总部之间快速安全地存储、处理和分发数据。</span><span class="sxs-lookup"><span data-stu-id="c52d5-118">Rapid and secure data storage, processing, and distribution between global remote locations and its central headquarters are required.</span></span>
- <span data-ttu-id="c52d5-119">必须保持员工与机器活动、设施信息和企业报告数据的安全。</span><span class="sxs-lookup"><span data-stu-id="c52d5-119">Employee and machinery activity, facility information, and business reporting data that must remain secure.</span></span> <span data-ttu-id="c52d5-120">必须适当分发数据，并符合区域合规性策略与行业法规。</span><span class="sxs-lookup"><span data-stu-id="c52d5-120">The data must be distributed appropriately and meet regional compliance policy and industry regulations.</span></span>

## <a name="solution"></a><span data-ttu-id="c52d5-121">解决方案</span><span class="sxs-lookup"><span data-stu-id="c52d5-121">Solution</span></span>

<span data-ttu-id="c52d5-122">使用本地和公有云环境来满足多设施企业的需求。</span><span class="sxs-lookup"><span data-stu-id="c52d5-122">Using both on-premises and public cloud environments meets the demands of multi-facility enterprises.</span></span> <span data-ttu-id="c52d5-123">Azure Stack Hub 提供快速、安全且灵活的解决方案用于收集、处理、存储和分发本地与远程数据。</span><span class="sxs-lookup"><span data-stu-id="c52d5-123">Azure Stack Hub offers a rapid, secure, and flexible solution for collecting, processing, storing, and distributing local and remote data.</span></span> <span data-ttu-id="c52d5-124">当安全性、保密性、企业政策与法规要求根据不同的位置和用户而异时，此模式特别有用。</span><span class="sxs-lookup"><span data-stu-id="c52d5-124">This pattern is especially useful when security, confidentiality, corporate policy, and regulatory requirements may differ between locations and users.</span></span>

![用于分析解决方案体系结构的分层数据模式](media/pattern-tiered-data-analytics/solution-architecture.png)

## <a name="components"></a><span data-ttu-id="c52d5-126">组件</span><span class="sxs-lookup"><span data-stu-id="c52d5-126">Components</span></span>

<span data-ttu-id="c52d5-127">此模式使用以下组件：</span><span class="sxs-lookup"><span data-stu-id="c52d5-127">This pattern uses the following components:</span></span>

| <span data-ttu-id="c52d5-128">层</span><span class="sxs-lookup"><span data-stu-id="c52d5-128">Layer</span></span> | <span data-ttu-id="c52d5-129">组件</span><span class="sxs-lookup"><span data-stu-id="c52d5-129">Component</span></span> | <span data-ttu-id="c52d5-130">说明</span><span class="sxs-lookup"><span data-stu-id="c52d5-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="c52d5-131">Azure</span><span class="sxs-lookup"><span data-stu-id="c52d5-131">Azure</span></span> | <span data-ttu-id="c52d5-132">存储</span><span class="sxs-lookup"><span data-stu-id="c52d5-132">Storage</span></span> | <span data-ttu-id="c52d5-133">[Azure 存储](/azure/storage/)帐户提供干净的数据使用终结点。</span><span class="sxs-lookup"><span data-stu-id="c52d5-133">An [Azure Storage](/azure/storage/) account provides a sterile data consumption endpoint.</span></span> <span data-ttu-id="c52d5-134">Azure 存储是 Microsoft 提供的适用于现代数据存储场景的云存储解决方案。</span><span class="sxs-lookup"><span data-stu-id="c52d5-134">Azure Storage is Microsoft's cloud storage solution for modern data storage scenarios.</span></span> <span data-ttu-id="c52d5-135">Azure 存储为数据对象提供可大规模缩放的对象存储，并为云提供文件系统服务。</span><span class="sxs-lookup"><span data-stu-id="c52d5-135">Azure Storage offers a massively scalable object store for data objects and a file system service for the cloud.</span></span> <span data-ttu-id="c52d5-136">它也提供用于可靠传送消息的消息存储，以及 NoSQL 存储。</span><span class="sxs-lookup"><span data-stu-id="c52d5-136">It also provides a messaging store for reliable messaging and a NoSQL store.</span></span> |
| <span data-ttu-id="c52d5-137">Azure Stack Hub</span><span class="sxs-lookup"><span data-stu-id="c52d5-137">Azure Stack Hub</span></span> | <span data-ttu-id="c52d5-138">存储</span><span class="sxs-lookup"><span data-stu-id="c52d5-138">Storage</span></span> | <span data-ttu-id="c52d5-139">[Azure Stack Hub 存储](/azure-stack/user/azure-stack-storage-overview)帐户用于多个服务：</span><span class="sxs-lookup"><span data-stu-id="c52d5-139">An [Azure Stack Hub Storage](/azure-stack/user/azure-stack-storage-overview) account is used for multiple services:</span></span><br><br><span data-ttu-id="c52d5-140">- 用于存储原始数据的 **Blob 存储**。</span><span class="sxs-lookup"><span data-stu-id="c52d5-140">- **Blob storage** for raw data storage.</span></span> <span data-ttu-id="c52d5-141">Blob 存储可以保存任何类型的文本或二进制数据，例如文档、媒体文件或应用安装程序。</span><span class="sxs-lookup"><span data-stu-id="c52d5-141">Blob storage can hold any type of text or binary data, such as a document, media file, or app installer.</span></span> <span data-ttu-id="c52d5-142">每个 Blob 组织在容器中。</span><span class="sxs-lookup"><span data-stu-id="c52d5-142">Every blob is organized under a container.</span></span> <span data-ttu-id="c52d5-143">容器提供了一种有用的方式来向对象组分配安全策略。</span><span class="sxs-lookup"><span data-stu-id="c52d5-143">Containers provide a useful way to assign security policies to groups of objects.</span></span> <span data-ttu-id="c52d5-144">一个存储帐户可以包含任意数目的容器，一个容器可以包含任意数目的 Blob，直至达到存储帐户的容量限制 500 TB。</span><span class="sxs-lookup"><span data-stu-id="c52d5-144">A storage account may contain any number of containers, and a container can contain any number of blobs, up to the 500-TB capacity limit of the storage account.</span></span><br><span data-ttu-id="c52d5-145">- 用于数据存档的 **Blob 存储**。</span><span class="sxs-lookup"><span data-stu-id="c52d5-145">- **Blob storage** for data archive.</span></span> <span data-ttu-id="c52d5-146">用于存档冷数据的低成本存储有其优势。</span><span class="sxs-lookup"><span data-stu-id="c52d5-146">There are benefits to low-cost storage for cool data archiving.</span></span> <span data-ttu-id="c52d5-147">冷数据的示例包括备份、媒体内容、科研数据、合规性和存档数据。</span><span class="sxs-lookup"><span data-stu-id="c52d5-147">Examples of cool data include backups, media content, scientific data, compliance, and archival data.</span></span> <span data-ttu-id="c52d5-148">一般而言，不经常访问的任何数据都被视为冷存储。</span><span class="sxs-lookup"><span data-stu-id="c52d5-148">In general, any data that's accessed infrequently is considered cool storage.</span></span> <span data-ttu-id="c52d5-149">根据访问频率和保留期等属性将数据分层。</span><span class="sxs-lookup"><span data-stu-id="c52d5-149">Tiering data based on attributes like frequency of access and retention period.</span></span> <span data-ttu-id="c52d5-150">客户数据并不经常被访问，但其访问延迟和性能需要与热数据类似。</span><span class="sxs-lookup"><span data-stu-id="c52d5-150">Customer data is infrequently accessed but requires similar latency and performance to hot data.</span></span><br><span data-ttu-id="c52d5-151">- 用于存储已处理的数据的**队列存储**。</span><span class="sxs-lookup"><span data-stu-id="c52d5-151">- **Queue storage** for processed data storage.</span></span> <span data-ttu-id="c52d5-152">队列存储用于在应用组件之间进行云消息传送。</span><span class="sxs-lookup"><span data-stu-id="c52d5-152">Queue storage provides cloud messaging between app components.</span></span> <span data-ttu-id="c52d5-153">在设计应用以实现可伸缩性时，通常要将各个应用组件分离，使其可以独立地进行伸缩。</span><span class="sxs-lookup"><span data-stu-id="c52d5-153">In designing apps for scale, app components are often decoupled so they can scale independently.</span></span> <span data-ttu-id="c52d5-154">队列存储提供的异步消息传送适用于在应用组件之间进行通信，无论这些应用组件是运行在云中、桌面上、本地服务器上还是移动设备上。</span><span class="sxs-lookup"><span data-stu-id="c52d5-154">Queue storage delivers asynchronous messaging for communication between app components, whether they're running in the cloud, on the desktop, an on-premises server, or a mobile device.</span></span> <span data-ttu-id="c52d5-155">队列存储还支持管理异步任务以及构建过程工作流。</span><span class="sxs-lookup"><span data-stu-id="c52d5-155">Queue storage also supports managing asynchronous tasks and building process work flows.</span></span> |
| | <span data-ttu-id="c52d5-156">Azure Functions</span><span class="sxs-lookup"><span data-stu-id="c52d5-156">Azure Functions</span></span> | <span data-ttu-id="c52d5-157">[Azure Functions](/azure/azure-functions/) 服务由 [Azure Stack Hub 上的 Azure 应用服务](/azure-stack/operator/azure-stack-app-service-overview)资源提供程序提供。</span><span class="sxs-lookup"><span data-stu-id="c52d5-157">The [Azure Functions](/azure/azure-functions/) service is provided by the [Azure App Service on Azure Stack Hub](/azure-stack/operator/azure-stack-app-service-overview) resource provider.</span></span> <span data-ttu-id="c52d5-158">使用 Azure Functions 可在简单的无服务器环境中执行代码，以响应各种事件。</span><span class="sxs-lookup"><span data-stu-id="c52d5-158">Azure Functions lets you execute your code in a simple, serverless environment in response to a variety of events.</span></span> <span data-ttu-id="c52d5-159">Azure Functions 可以使用所选编程语言按需缩放，而无需创建 VM 或发布 Web 应用。</span><span class="sxs-lookup"><span data-stu-id="c52d5-159">Azure Functions scale to meet demand without having to create a VM or publish a web app, using the programming language of your choice.</span></span> <span data-ttu-id="c52d5-160">该解决方案将 Functions 用于以下操作：：</span><span class="sxs-lookup"><span data-stu-id="c52d5-160">Functions are used by the solution for:</span></span><br><br><span data-ttu-id="c52d5-161">- **数据引入**</span><span class="sxs-lookup"><span data-stu-id="c52d5-161">- **Data intake**</span></span><br><span data-ttu-id="c52d5-162">- **数据净化。**</span><span class="sxs-lookup"><span data-stu-id="c52d5-162">- **Data sterilization.**</span></span> <span data-ttu-id="c52d5-163">手动触发的函数可以执行计划的数据处理、清理和存档。</span><span class="sxs-lookup"><span data-stu-id="c52d5-163">Manually triggered functions can perform scheduled data processing, clean up, and archiving.</span></span> <span data-ttu-id="c52d5-164">示例可能包括夜间客户列表清理与每月报表处理。</span><span class="sxs-lookup"><span data-stu-id="c52d5-164">Examples may include nightly customer list scrubs and monthly report processing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="c52d5-165">问题和注意事项</span><span class="sxs-lookup"><span data-stu-id="c52d5-165">Issues and considerations</span></span>

<span data-ttu-id="c52d5-166">在决定如何实现此解决方案时，请考虑以下几点：</span><span class="sxs-lookup"><span data-stu-id="c52d5-166">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="c52d5-167">可伸缩性</span><span class="sxs-lookup"><span data-stu-id="c52d5-167">Scalability</span></span>

<span data-ttu-id="c52d5-168">Azure Functions 和存储解决方案可以通过缩放来满足数据量和处理方面的需求。</span><span class="sxs-lookup"><span data-stu-id="c52d5-168">Azure Functions and storage solutions scale to meet data volume and processing demands.</span></span> <span data-ttu-id="c52d5-169">有关 Azure 可伸缩性的信息和目标，请参阅 [Azure 存储可伸缩性文档](/azure/storage/common/storage-scalability-targets)。</span><span class="sxs-lookup"><span data-stu-id="c52d5-169">For Azure scalability information and targets, see [Azure Storage scalability documentation](/azure/storage/common/storage-scalability-targets).</span></span>

### <a name="availability"></a><span data-ttu-id="c52d5-170">可用性</span><span class="sxs-lookup"><span data-stu-id="c52d5-170">Availability</span></span>

<span data-ttu-id="c52d5-171">就此模式来说，存储是主要的可用性注意事项。</span><span class="sxs-lookup"><span data-stu-id="c52d5-171">Storage is the primary availability consideration for this pattern.</span></span> <span data-ttu-id="c52d5-172">处理和分配大量的数据时，必须通过快速链路进行连接。</span><span class="sxs-lookup"><span data-stu-id="c52d5-172">Connection via fast links is required for large data volume processing and distribution.</span></span>

### <a name="manageability"></a><span data-ttu-id="c52d5-173">可管理性</span><span class="sxs-lookup"><span data-stu-id="c52d5-173">Manageability</span></span>

<span data-ttu-id="c52d5-174">此解决方案的可管理性取决于所用的创作工具，以及是否采用源代码管理。</span><span class="sxs-lookup"><span data-stu-id="c52d5-174">Manageability of this solution depends on authoring tools in use and engagement of source control.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c52d5-175">后续步骤</span><span class="sxs-lookup"><span data-stu-id="c52d5-175">Next steps</span></span>

<span data-ttu-id="c52d5-176">若要详细了解本文中介绍的主题：</span><span class="sxs-lookup"><span data-stu-id="c52d5-176">To learn more about topics introduced in this article:</span></span>

- <span data-ttu-id="c52d5-177">请参阅 [Azure 存储](/azure/storage/)和 [Azure Functions](/azure/azure-functions/) 文档。</span><span class="sxs-lookup"><span data-stu-id="c52d5-177">See the [Azure Storage](/azure/storage/) and [Azure Functions](/azure/azure-functions/) documentation.</span></span> <span data-ttu-id="c52d5-178">此模式大量使用 azure 存储帐户，并可在 Azure 和 Azure Stack 中心 Azure Functions。</span><span class="sxs-lookup"><span data-stu-id="c52d5-178">This pattern makes heavy use of Azure Storage accounts and Azure Functions on both Azure and Azure Stack Hub.</span></span>
- <span data-ttu-id="c52d5-179">请参阅[混合应用程序设计注意事项](overview-app-design-considerations.md)以了解有关最佳做法的详细信息，并获取对其他问题的解答。</span><span class="sxs-lookup"><span data-stu-id="c52d5-179">See [Hybrid application design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to additional questions.</span></span>
- <span data-ttu-id="c52d5-180">请参阅 [Azure Stack 产品和解决方案系列](/azure-stack)，详细了解产品和解决方案的整个阵容。</span><span class="sxs-lookup"><span data-stu-id="c52d5-180">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="c52d5-181">准备好测试解决方案示例时，请继续阅读[分层式数据分析解决方案部署指南](https://aka.ms/tiereddatadeploy)。</span><span class="sxs-lookup"><span data-stu-id="c52d5-181">When you're ready to test the solution example, continue with the [Tiered data for analytics solution deployment guide](https://aka.ms/tiereddatadeploy).</span></span> <span data-ttu-id="c52d5-182">该部署指南逐步说明了如何部署和测试 Azure Stack 的组件。</span><span class="sxs-lookup"><span data-stu-id="c52d5-182">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
